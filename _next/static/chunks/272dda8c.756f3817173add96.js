"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9129],{2849:function(e,r,t){t.d(r,{$5:function(){return F},P6:function(){return tb},a:function(){return tU},i8:function(){return rV},j6:function(){return rP}});var n,i=t(27715),o=t(16441),a=t(60804),s=t(15866),u=t(91094),c=t(79480),l=t.n(c),f=t(46195),h=t.n(f),d=t(7961),v=t.n(d),p=t(46260),m=t.n(p),g=t(82139),_=t.n(g),y=t(1581),z=t(96486),w=t(6731),b=t(6881),k=t(37707),E=t(55395),P=t.n(E),I=t(48764).Buffer;function T(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function x(e,r,t){return r&&T(e.prototype,r),t&&T(e,t),e}function N(){return(N=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}).apply(this,arguments)}function U(e,r){e.prototype=Object.create(r.prototype),e.prototype.constructor=e,B(e,r)}function B(e,r){return(B=Object.setPrototypeOf||function(e,r){return e.__proto__=r,e})(e,r)}function A(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=Array(r);t<r;t++)n[t]=e[t];return n}var O={SINGLE:0,MULTI:1};function V(e){var r=e.address+"::"+e.module+"::"+e.name;if(e.type_params&&e.type_params.length>0){r=(r=r.concat("<")).concat(R(e.type_params[0]));for(var t,n=function(e,r){var t;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(t=function(e,r){if(e){if("string"==typeof e)return S(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if("Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return S(e,r)}}(e))){t&&(e=t);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(t=e[Symbol.iterator]()).next.bind(t)}(e.type_params.slice(1));!(t=n()).done;){var i=t.value;r=r.concat(",").concat(R(i))}r=r.concat(">")}return r}function R(e){if("string"==typeof e)return e.toLowerCase();if("object"==typeof e){if(void 0!==e.Vector)return"vector<"+R(e.Vector)+">";if(void 0!==e.Struct)return V(e.Struct)}}function C(e){return"string"!=typeof e?e.address+"::"+e.module+"::"+e.functionName:e}var j=function(){function e(e){this.buffer=new ArrayBuffer(e.length),new Uint8Array(this.buffer).set(e,0),this.offset=0}var r=e.prototype;return r.read=function(e){var r=this.buffer.slice(this.offset,this.offset+e);return this.offset+=e,r},r.deserializeStr=function(){var r=this.deserializeBytes();return e.textDecoder.decode(r)},r.deserializeBytes=function(){var e=this.deserializeLen();if(e<0)throw Error("Length of a bytes array can't be negative");return new Uint8Array(this.read(e))},r.deserializeBool=function(){return 1==new Uint8Array(this.read(1))[0]},r.deserializeUnit=function(){return null},r.deserializeU8=function(){return new DataView(this.read(1)).getUint8(0)},r.deserializeU16=function(){return new DataView(this.read(2)).getUint16(0,!0)},r.deserializeU32=function(){return new DataView(this.read(4)).getUint32(0,!0)},r.deserializeU64=function(){var r=this.deserializeU32();return BigInt(this.deserializeU32())<<e.BIG_32|BigInt(r)},r.deserializeU128=function(){var r=this.deserializeU64();return BigInt(this.deserializeU64())<<e.BIG_64|BigInt(r)},r.deserializeI8=function(){return new DataView(this.read(1)).getInt8(0)},r.deserializeI16=function(){return new DataView(this.read(2)).getInt16(0,!0)},r.deserializeI32=function(){return new DataView(this.read(4)).getInt32(0,!0)},r.deserializeI64=function(){var r=this.deserializeI32();return BigInt(this.deserializeI32())<<e.BIG_32|BigInt(r)},r.deserializeI128=function(){var r=this.deserializeI64();return BigInt(this.deserializeI64())<<e.BIG_64|BigInt(r)},r.deserializeOptionTag=function(){return this.deserializeBool()},r.getBufferOffset=function(){return this.offset},r.deserializeChar=function(){throw Error("Method deserializeChar not implemented.")},r.deserializeF32=function(){return new DataView(this.read(4)).getFloat32(0,!0)},r.deserializeF64=function(){return new DataView(this.read(8)).getFloat64(0,!0)},e}();j.BIG_32=BigInt(32),j.BIG_64=BigInt(64),j.textDecoder=new TextDecoder;var D=function(e){function r(r){return e.call(this,r)||this}U(r,e);var t=r.prototype;return t.deserializeUleb128AsU32=function(){for(var e=0,t=0;t<32;t+=7){var n=this.deserializeU8(),i=127&n;if((e|=i<<t)<0||e>r.MAX_UINT_32)break;if(i==n){if(t>0&&0==i)throw Error("Invalid uleb128 number (unexpected zero digit)");return e}}throw Error("Overflow while parsing uleb128-encoded uint32 value")},t.deserializeLen=function(){return this.deserializeUleb128AsU32()},t.deserializeVariantIndex=function(){return this.deserializeUleb128AsU32()},t.checkThatKeySlicesAreIncreasing=function(e,r){},r}(j);D.MAX_UINT_32=4294967295;var G=function(){function e(){this.buffer=new ArrayBuffer(64),this.offset=0}var r=e.prototype;return r.ensureBufferWillHandleSize=function(e){for(;this.buffer.byteLength<this.offset+e;){var r=new ArrayBuffer(2*this.buffer.byteLength);new Uint8Array(r).set(new Uint8Array(this.buffer)),this.buffer=r}},r.serialize=function(e){this.ensureBufferWillHandleSize(e.length),new Uint8Array(this.buffer,this.offset).set(e),this.offset+=e.length},r.serializeStr=function(r){this.serializeBytes(e.textEncoder.encode(r))},r.serializeBytes=function(e){this.serializeLen(e.length),this.serialize(e)},r.serializeBool=function(e){this.serialize(new Uint8Array([e?1:0]))},r.serializeUnit=function(e){},r.serializeWithFunction=function(e,r,t){this.ensureBufferWillHandleSize(r);var n=new DataView(this.buffer,this.offset);e.apply(n,[0,t,!0]),this.offset+=r},r.serializeU8=function(e){this.serialize(new Uint8Array([e]))},r.serializeU16=function(e){this.serializeWithFunction(DataView.prototype.setUint16,2,e)},r.serializeU32=function(e){this.serializeWithFunction(DataView.prototype.setUint32,4,e)},r.serializeU64=function(r){var t=BigInt(r)&e.BIG_32Fs,n=BigInt(r)>>e.BIG_32;this.serializeU32(Number(t)),this.serializeU32(Number(n))},r.serializeU128=function(r){var t=BigInt(r)&e.BIG_64Fs,n=BigInt(r)>>e.BIG_64;this.serializeU64(t),this.serializeU64(n)},r.serializeI8=function(e){this.ensureBufferWillHandleSize(1),new DataView(this.buffer,this.offset).setInt8(0,e),this.offset+=1},r.serializeI16=function(e){this.ensureBufferWillHandleSize(2),new DataView(this.buffer,this.offset).setInt16(0,e,!0),this.offset+=2},r.serializeI32=function(e){this.ensureBufferWillHandleSize(4),new DataView(this.buffer,this.offset).setInt32(0,e,!0),this.offset+=4},r.serializeI64=function(r){var t=BigInt(r)&e.BIG_32Fs,n=BigInt(r)>>e.BIG_32;this.serializeI32(Number(t)),this.serializeI32(Number(n))},r.serializeI128=function(r){var t=BigInt(r)&e.BIG_64Fs,n=BigInt(r)>>e.BIG_64;this.serializeI64(t),this.serializeI64(n)},r.serializeOptionTag=function(e){this.serializeBool(e)},r.getBufferOffset=function(){return this.offset},r.getBytes=function(){return new Uint8Array(this.buffer).slice(0,this.offset)},r.serializeChar=function(e){throw Error("Method serializeChar not implemented.")},r.serializeF32=function(e){this.ensureBufferWillHandleSize(4),new DataView(this.buffer,this.offset).setFloat32(0,e,!0),this.offset+=4},r.serializeF64=function(e){this.ensureBufferWillHandleSize(8),new DataView(this.buffer,this.offset).setFloat64(0,e,!0),this.offset+=8},e}();G.BIG_32=BigInt(32),G.BIG_64=BigInt(64),G.BIG_32Fs=BigInt("4294967295"),G.BIG_64Fs=BigInt("18446744073709551615"),G.textEncoder=new TextEncoder;var L=function(e){function r(){return e.call(this)||this}U(r,e);var t=r.prototype;return t.serializeU32AsUleb128=function(e){for(var r=[];e>>>7!=0;)r.push(127&e|128),e>>>=7;r.push(e),this.serialize(new Uint8Array(r))},t.serializeLen=function(e){this.serializeU32AsUleb128(e)},t.serializeVariantIndex=function(e){this.serializeU32AsUleb128(e)},t.sortMapEntries=function(e){},r}(G),F={__proto__:null,BcsDeserializer:D,BcsSerializer:L};function H(e){return("00000000000000000000000000000000"+(e>>>0).toString(2)).slice(-32)}function M(e){return Number.parseInt(Number.parseInt(e,2).toString(10),10)}function W(e){var r=H(e).match(/.{1,8}/g);return Uint8Array.from(r.map(function(e){return M(e)}))}function K(e){var r=[];return e.forEach(function(e){return r.push(H(e).slice(-8))}),M(r.join(""))}function q(e,r){if(r>31||r<0)throw Error("mask: invalid idx at "+r+", should be between 0 and 31");return e|1<<32-r-1}function Y(e,r){if(r>31||r<0)throw Error("mask: invalid idx at "+r+", should be between 0 and 31");return(e>>32-r-1)%2!=0}var J={SerializationError:"Struct to be signed does not serialize correctly",DeserializationError:"Key or signature material does not deserialize correctly",ValidationError:"Key or signature material deserializes, but is otherwise not valid",WrongLengthError:"Key, threshold or signature material does not have the expected size",CanonicalRepresentationError:"Part of the signature or key is not canonical resulting to malleability issues",SmallSubgroupError:"A curve point (i.e., a public key) lies on a small group",PointNotOnCurveError:"A curve point (i.e., a public key) does not satisfy the curve equation",BitVecError:"BitVec errors in accountable multi-sig schemes"},$=function(){function e(e,r){this.field0=e,this.field1=r}return e.prototype.serialize=function(e){this.field0.serialize(e),this.field1.serialize(e)},e.deserialize=function(r){var t=X.deserialize(r),n=ei.deserialize(r);return new e(t,n)},e}(),X=function(){function e(e){this.value=e}return e.prototype.serialize=function(e){rr.serializeArray16U8Array(this.value,e)},e.deserialize=function(r){var t=rr.deserializeArray16U8Array(r);return new e(t)},e}();X.LENGTH=16;var Q=function(){function e(e,r){this.name=e,this.type_tag=r}return e.prototype.serialize=function(e){e.serializeStr(this.name),this.type_tag.serialize(e)},e.deserialize=function(r){var t=r.deserializeStr(),n=eQ.deserialize(r);return new e(t,n)},e}(),Z=function(){function e(e){this.value=e}return e.prototype.serialize=function(e){e.serializeBytes(this.value)},e.deserialize=function(r){var t=r.deserializeBytes();return new e(t)},e}(),ee=function(){function e(e,r,t,n,i,o,a,s){this.parent_hash=e,this.timestamp=r,this.author=t,this.author_auth_key=n,this.uncles=i,this.number=o,this.chain_id=a,this.parent_gas_used=s}return e.prototype.serialize=function(e){this.parent_hash.serialize(e),e.serializeU64(this.timestamp),this.author.serialize(e),rr.serializeOptionAuthenticationKey(this.author_auth_key,e),e.serializeU64(this.uncles),e.serializeU64(this.number),this.chain_id.serialize(e),e.serializeU64(this.parent_gas_used)},e.deserialize=function(r){var t=ev.deserialize(r),n=r.deserializeU64(),i=X.deserialize(r),o=rr.deserializeOptionAuthenticationKey(r),a=r.deserializeU64(),s=r.deserializeU64(),u=er.deserialize(r),c=r.deserializeU64();return new e(t,n,i,o,a,s,u,c)},e}(),er=function(){function e(e){this.id=e}return e.prototype.serialize=function(e){e.serializeU8(this.id)},e.deserialize=function(r){var t=r.deserializeU8();return new e(t)},e}(),et=function(e){function r(r){var t;return(t=e.call(this)||this).value=r,t}return U(r,e),r.prototype.serialize=function(e){e.serializeVariantIndex(0),this.value.serialize(e)},r.load=function(e){var t=en.deserialize(e);return new r(t)},r}(function(){function e(){}return e.deserialize=function(e){var r=e.deserializeVariantIndex();if(0===r)return et.load(e);throw Error("Unknown variant index for ContractEvent: "+r)},e}()),en=function(){function e(e,r,t,n){this.key=e,this.sequence_number=r,this.type_tag=t,this.event_data=n}return e.prototype.serialize=function(e){this.key.serialize(e),e.serializeU64(this.sequence_number),this.type_tag.serialize(e),e.serializeBytes(this.event_data)},e.deserialize=function(r){var t=ed.deserialize(r),n=r.deserializeU64(),i=eQ.deserialize(r),o=r.deserializeBytes();return new e(t,n,i,o)},e}(),ei=function(){function e(){}return e.deserialize=function(e){var r=e.deserializeVariantIndex();switch(r){case 0:return eo.load(e);case 1:return ea.load(e);default:throw Error("Unknown variant index for DataPath: "+r)}},e}(),eo=function(e){function r(r){var t;return(t=e.call(this)||this).value=r,t}return U(r,e),r.prototype.serialize=function(e){e.serializeVariantIndex(0),this.value.serialize(e)},r.load=function(e){var t=ep.deserialize(e);return new r(t)},r}(ei),ea=function(e){function r(r){var t;return(t=e.call(this)||this).value=r,t}return U(r,e),r.prototype.serialize=function(e){e.serializeVariantIndex(1),this.value.serialize(e)},r.load=function(e){var t=eA.deserialize(e);return new r(t)},r}(ei),es=function(){function e(){}return e.deserialize=function(e){var r=e.deserializeVariantIndex();switch(r){case 0:return eu.load(e);case 1:return ec.load(e);default:throw Error("Unknown variant index for DataType: "+r)}},e}(),eu=function(e){function r(){return e.call(this)||this}return U(r,e),r.prototype.serialize=function(e){e.serializeVariantIndex(0)},r.load=function(e){return new r},r}(es),ec=function(e){function r(){return e.call(this)||this}return U(r,e),r.prototype.serialize=function(e){e.serializeVariantIndex(1)},r.load=function(e){return new r},r}(es),el=function(){function e(e){this.value=e}return e.prototype.serialize=function(e){e.serializeBytes(this.value)},e.deserialize=function(r){var t=r.deserializeBytes();return new e(t)},e}(),ef=function(){function e(e){this.value=e}return e.prototype.serialize=function(e){e.serializeBytes(this.value)},e.deserialize=function(r){var t=r.deserializeBytes();return new e(t)},e}(),eh=function(){function e(e){this.value=e}return e.prototype.serialize=function(e){e.serializeBytes(this.value)},e.deserialize=function(r){var t=r.deserializeBytes();return new e(t)},e}(),ed=function(){function e(e){this.value=e}return e.prototype.serialize=function(e){e.serializeBytes(this.value)},e.deserialize=function(r){var t=r.deserializeBytes();return new e(t)},e}(),ev=function(){function e(e){this.value=e}return e.prototype.serialize=function(e){e.serializeBytes(this.value)},e.deserialize=function(r){var t=r.deserializeBytes();return new e(t)},e}(),ep=function(){function e(e){this.value=e}return e.prototype.serialize=function(e){e.serializeStr(this.value)},e.deserialize=function(r){var t=r.deserializeStr();return new e(t)},e}(),em=function(){function e(e){this.account_address=e}return e.prototype.serialize=function(e){this.account_address.serialize(e)},e.deserialize=function(r){var t=X.deserialize(r);return new e(t)},e}(),eg=function(){function e(e){this.code=e}return e.prototype.serialize=function(e){e.serializeBytes(this.code)},e.deserialize=function(r){var t=r.deserializeBytes();return new e(t)},e}(),e_=function(){function e(e,r){this.address=e,this.name=r}return e.prototype.serialize=function(e){this.address.serialize(e),this.name.serialize(e)},e.deserialize=function(r){var t=X.deserialize(r),n=ep.deserialize(r);return new e(t,n)},e}(),ey=function(){function e(e,r){this.public_keys=e,this.threshold=r;var t=e.length;if(0===r||t<r)throw Error(J.ValidationError);if(t>32)throw Error(J.WrongLengthError)}var r=e.prototype;return r.serialize=function(e){e.serializeBytes(this.value())},e.deserialize=function(r){for(var t=r.deserializeBytes(),n=[],i=(t.length-1)/32,o=0;o<i;o++){var a=32*o,s=a+32;n.push(new ef(t.slice(a,s)))}var u=new DataView(t.slice(-1).buffer,0).getUint8(0);return new e(n,u)},r.value=function(){var e=[];this.public_keys.forEach(function(r){e.push(r.value)});var r=new Uint8Array(1);return r[0]=this.threshold,(0,o.zo)([].concat(e,r))},e}(),ez=function(){function e(e,r){this.signatures=e,this.bitmap=r}e.build=function(r){var t=r.length;if(0===t||t>32)throw Error(J.ValidationError);var n=r.sort(function(e,r){return e[1]>r[1]?1:-1}),i=[],o=0;return n.forEach(function(e,r){if(console.log(e,r),e[1]>=32)throw Error(J.BitVecError+": Signature index is out of range");if(Y(o,e[1]))throw Error(J.BitVecError+": Duplicate signature index");i.push(e[0]),o=q(o,e[1])}),new e(i,o)};var r=e.prototype;return r.serialize=function(e){e.serializeBytes(this.value())},e.deserialize=function(r){for(var t=r.deserializeBytes(),n=[],i=(t.length-4)/64,o=0;o<i;o++){var a=64*o,s=a+64;n.push(new eh(t.slice(a,s)))}var u=K(t.slice(-4));return new e(n,u)},r.value=function(){var e=[];this.signatures.forEach(function(r){e.push(r.value)});var r=W(this.bitmap);return(0,o.zo)([].concat(e,r))},e}(),ew=function(){function e(e,r){this.signature=e,this.threshold=r}var r=e.prototype;return r.signatures=function(){var e=this.signature.signatures,r=this.signature.bitmap,t=[],n=0;return e.forEach(function(e,i){for(;!Y(r,n);)n+=1;t.push([e,n]),n+=1}),t},e.merge=function(r){if(0===r.length)throw Error("MultiEd25519SignatureShard shards is empty");var t=r[0].threshold,n=[];return r.forEach(function(e){if(e.threshold!==t)throw Error("MultiEd25519SignatureShard shards threshold not same");n.push.apply(n,e.signatures())}),new e(ez.build(n),t)},r.is_enough=function(){return this.signature.signatures.length>=this.threshold},e}(),eb=function(){function e(e,r,t){this.public_keys=e,this.threshold=r,this.private_keys=t;var n=e.length,i=Object.keys(t).length;if(0===r||0===i||n<r)throw Error(J.ValidationError);if(i>32||n>32)throw Error(J.WrongLengthError)}var r=e.prototype;return r.serialize=function(e){var r=this;e.serializeU8(this.public_keys.length),e.serializeU8(this.threshold),e.serializeU8(this.len()),this.public_keys.forEach(function(r){r.serialize(e)}),Object.keys(this.private_keys).forEach(function(t){e.serializeU8(Number.parseInt(t,10)),r.private_keys[t].serialize(e)})},e.deserialize=function(r){for(var t=r.deserializeU8(),n=r.deserializeU8(),i=r.deserializeU8(),o=[],a=0;a<t;a++)o.push(ef.deserialize(r));for(var s=0;s<i;s++){var u=r.deserializeU8(),c=el.deserialize(r);o[u]=c}return new e(o,n,[])},r.publicKey=function(){return new ey(this.public_keys,this.threshold)},r.privateKeys=function(){return Object.values(this.private_keys)},r.privateKey=function(){var e=new Uint8Array(3);e[0]=this.public_keys.length,e[1]=this.threshold,e[2]=this.len();var r=[];this.public_keys.forEach(function(e){r.push(e.value)});var t=[];return Object.values(this.private_keys).forEach(function(e){t.push(e.value)}),(0,o.zo)([e].concat(r,t))},r.len=function(){return Object.values(this.private_keys).length},r.isEmpty=function(){return 0===this.len()},e}(),ek=function(){function e(e,r,t){this.package_address=e,this.modules=r,this.init_script=t}return e.prototype.serialize=function(e){this.package_address.serialize(e),rr.serializeVectorModule(this.modules,e),rr.serializeOptionScriptFunction(this.init_script,e)},e.deserialize=function(r){var t=X.deserialize(r),n=rr.deserializeVectorModule(r),i=rr.deserializeOptionScriptFunction(r);return new e(t,n,i)},e}(),eE=function(){function e(e,r,t,n,i,o,a,s){this.sender=e,this.sequence_number=r,this.payload=t,this.max_gas_amount=n,this.gas_unit_price=i,this.gas_token_code=o,this.expiration_timestamp_secs=a,this.chain_id=s}return e.prototype.serialize=function(e){this.sender.serialize(e),e.serializeU64(this.sequence_number),this.payload.serialize(e),e.serializeU64(this.max_gas_amount),e.serializeU64(this.gas_unit_price),e.serializeStr(this.gas_token_code),e.serializeU64(this.expiration_timestamp_secs),this.chain_id.serialize(e)},e.deserialize=function(r){var t=X.deserialize(r),n=r.deserializeU64(),i=eK.deserialize(r),o=r.deserializeU64(),a=r.deserializeU64(),s=r.deserializeStr(),u=r.deserializeU64(),c=er.deserialize(r);return new e(t,n,i,o,a,s,u,c)},e}(),eP=function(){function e(e,r,t){this.code=e,this.ty_args=r,this.args=t}return e.prototype.serialize=function(e){e.serializeBytes(this.code),rr.serializeVectorTypeTag(this.ty_args,e),rr.serializeVectorBytes(this.args,e)},e.deserialize=function(r){var t=r.deserializeBytes(),n=rr.deserializeVectorTypeTag(r),i=rr.deserializeVectorBytes(r);return new e(t,n,i)},e}(),eI=function(){function e(){}return e.deserialize=function(e){var r=e.deserializeVariantIndex();switch(r){case 0:return eT.load(e);case 1:return ex.load(e);default:throw Error("Unknown variant index for ScriptABI: "+r)}},e}(),eT=function(e){function r(r){var t;return(t=e.call(this)||this).value=r,t}return U(r,e),r.prototype.serialize=function(e){e.serializeVariantIndex(0),this.value.serialize(e)},r.load=function(e){var t=e$.deserialize(e);return new r(t)},r}(eI),ex=function(e){function r(r){var t;return(t=e.call(this)||this).value=r,t}return U(r,e),r.prototype.serialize=function(e){e.serializeVariantIndex(1),this.value.serialize(e)},r.load=function(e){var t=eU.deserialize(e);return new r(t)},r}(eI),eN=function(){function e(e,r,t,n){this.module=e,this.func=r,this.ty_args=t,this.args=n}return e.prototype.serialize=function(e){this.module.serialize(e),this.func.serialize(e),rr.serializeVectorTypeTag(this.ty_args,e),rr.serializeVectorBytes(this.args,e)},e.deserialize=function(r){var t=e_.deserialize(r),n=ep.deserialize(r),i=rr.deserializeVectorTypeTag(r),o=rr.deserializeVectorBytes(r);return new e(t,n,i,o)},e}(),eU=function(){function e(e,r,t,n,i){this.name=e,this.module_name=r,this.doc=t,this.ty_args=n,this.args=i}return e.prototype.serialize=function(e){e.serializeStr(this.name),this.module_name.serialize(e),e.serializeStr(this.doc),rr.serializeVectorTypeArgumentAbi(this.ty_args,e),rr.serializeVectorArgumentAbi(this.args,e)},e.deserialize=function(r){var t=r.deserializeStr(),n=e_.deserialize(r),i=r.deserializeStr(),o=rr.deserializeVectorTypeArgumentAbi(r),a=rr.deserializeVectorArgumentAbi(r);return new e(t,n,i,o,a)},e}(),eB=function(){function e(e,r){this.raw_txn=e,this.authenticator=r}return e.prototype.serialize=function(e){this.raw_txn.serialize(e),this.authenticator.serialize(e)},e.deserialize=function(r){var t=eE.deserialize(r),n=eH.deserialize(r);return new e(t,n)},e.ed25519=function(r,t,n){var i=new eM(t,n);return new e(r,i)},e.multi_ed25519=function(r,t,n){var i=new eW(t,n);return new e(r,i)},e}(),eA=function(){function e(e,r,t,n){this.address=e,this.module=r,this.name=t,this.type_params=n}return e.prototype.serialize=function(e){this.address.serialize(e),this.module.serialize(e),this.name.serialize(e),rr.serializeVectorTypeTag(this.type_params,e)},e.deserialize=function(r){var t=X.deserialize(r),n=ep.deserialize(r),i=ep.deserialize(r),o=rr.deserializeVectorTypeTag(r);return new e(t,n,i,o)},e}(),eS=function(){function e(){}return e.deserialize=function(e){var r=e.deserializeVariantIndex();switch(r){case 0:return eO.load(e);case 1:return eV.load(e);default:throw Error("Unknown variant index for Transaction: "+r)}},e}(),eO=function(e){function r(r){var t;return(t=e.call(this)||this).value=r,t}return U(r,e),r.prototype.serialize=function(e){e.serializeVariantIndex(0),this.value.serialize(e)},r.load=function(e){var t=eB.deserialize(e);return new r(t)},r}(eS),eV=function(e){function r(r){var t;return(t=e.call(this)||this).value=r,t}return U(r,e),r.prototype.serialize=function(e){e.serializeVariantIndex(1),this.value.serialize(e)},r.load=function(e){var t=ee.deserialize(e);return new r(t)},r}(eS),eR=function(){function e(){}return e.deserialize=function(e){var r=e.deserializeVariantIndex();switch(r){case 0:return eC.load(e);case 1:return ej.load(e);case 2:return eD.load(e);case 3:return eG.load(e);case 4:return eL.load(e);case 5:return eF.load(e);default:throw Error("Unknown variant index for TransactionArgument: "+r)}},e}(),eC=function(e){function r(r){var t;return(t=e.call(this)||this).value=r,t}return U(r,e),r.prototype.serialize=function(e){e.serializeVariantIndex(0),e.serializeU8(this.value)},r.load=function(e){var t=e.deserializeU8();return new r(t)},r}(eR),ej=function(e){function r(r){var t;return(t=e.call(this)||this).value=r,t}return U(r,e),r.prototype.serialize=function(e){e.serializeVariantIndex(1),e.serializeU64(this.value)},r.load=function(e){var t=e.deserializeU64();return new r(t)},r}(eR),eD=function(e){function r(r){var t;return(t=e.call(this)||this).value=r,t}return U(r,e),r.prototype.serialize=function(e){e.serializeVariantIndex(2),e.serializeU128(this.value)},r.load=function(e){var t=e.deserializeU128();return new r(t)},r}(eR),eG=function(e){function r(r){var t;return(t=e.call(this)||this).value=r,t}return U(r,e),r.prototype.serialize=function(e){e.serializeVariantIndex(3),this.value.serialize(e)},r.load=function(e){var t=X.deserialize(e);return new r(t)},r}(eR),eL=function(e){function r(r){var t;return(t=e.call(this)||this).value=r,t}return U(r,e),r.prototype.serialize=function(e){e.serializeVariantIndex(4),e.serializeBytes(this.value)},r.load=function(e){var t=e.deserializeBytes();return new r(t)},r}(eR),eF=function(e){function r(r){var t;return(t=e.call(this)||this).value=r,t}return U(r,e),r.prototype.serialize=function(e){e.serializeVariantIndex(5),e.serializeBool(this.value)},r.load=function(e){var t=e.deserializeBool();return new r(t)},r}(eR),eH=function(){function e(){}return e.deserialize=function(e){var r=e.deserializeVariantIndex();switch(r){case 0:return eM.load(e);case 1:return eW.load(e);default:throw Error("Unknown variant index for TransactionAuthenticator: "+r)}},e}(),eM=function(e){function r(r,t){var n;return(n=e.call(this)||this).public_key=r,n.signature=t,n}return U(r,e),r.prototype.serialize=function(e){e.serializeVariantIndex(0),this.public_key.serialize(e),this.signature.serialize(e)},r.load=function(e){var t=ef.deserialize(e),n=eh.deserialize(e);return new r(t,n)},r}(eH),eW=function(e){function r(r,t){var n;return(n=e.call(this)||this).public_key=r,n.signature=t,n}return U(r,e),r.prototype.serialize=function(e){e.serializeVariantIndex(1),this.public_key.serialize(e),this.signature.serialize(e)},r.load=function(e){var t=ey.deserialize(e),n=ez.deserialize(e);return new r(t,n)},r}(eH),eK=function(){function e(){}return e.deserialize=function(e){var r=e.deserializeVariantIndex();switch(r){case 0:return eq.load(e);case 1:return eY.load(e);case 2:return eJ.load(e);default:throw Error("Unknown variant index for TransactionPayload: "+r)}},e}(),eq=function(e){function r(r){var t;return(t=e.call(this)||this).value=r,t}return U(r,e),r.prototype.serialize=function(e){e.serializeVariantIndex(0),this.value.serialize(e)},r.load=function(e){var t=eP.deserialize(e);return new r(t)},r}(eK),eY=function(e){function r(r){var t;return(t=e.call(this)||this).value=r,t}return U(r,e),r.prototype.serialize=function(e){e.serializeVariantIndex(1),this.value.serialize(e)},r.load=function(e){var t=ek.deserialize(e);return new r(t)},r}(eK),eJ=function(e){function r(r){var t;return(t=e.call(this)||this).value=r,t}return U(r,e),r.prototype.serialize=function(e){e.serializeVariantIndex(2),this.value.serialize(e)},r.load=function(e){var t=eN.deserialize(e);return new r(t)},r}(eK),e$=function(){function e(e,r,t,n,i){this.name=e,this.doc=r,this.code=t,this.ty_args=n,this.args=i}return e.prototype.serialize=function(e){e.serializeStr(this.name),e.serializeStr(this.doc),e.serializeBytes(this.code),rr.serializeVectorTypeArgumentAbi(this.ty_args,e),rr.serializeVectorArgumentAbi(this.args,e)},e.deserialize=function(r){var t=r.deserializeStr(),n=r.deserializeStr(),i=r.deserializeBytes(),o=rr.deserializeVectorTypeArgumentAbi(r),a=rr.deserializeVectorArgumentAbi(r);return new e(t,n,i,o,a)},e}(),eX=function(){function e(e){this.name=e}return e.prototype.serialize=function(e){e.serializeStr(this.name)},e.deserialize=function(r){var t=r.deserializeStr();return new e(t)},e}(),eQ=function(){function e(){}return e.deserialize=function(e){var r=e.deserializeVariantIndex();switch(r){case 0:return eZ.load(e);case 1:return e0.load(e);case 2:return e1.load(e);case 3:return e2.load(e);case 4:return e8.load(e);case 5:return e6.load(e);case 6:return e4.load(e);case 7:return e3.load(e);default:throw Error("Unknown variant index for TypeTag: "+r)}},e}(),eZ=function(e){function r(){return e.call(this)||this}return U(r,e),r.prototype.serialize=function(e){e.serializeVariantIndex(0)},r.load=function(e){return new r},r}(eQ),e0=function(e){function r(){return e.call(this)||this}return U(r,e),r.prototype.serialize=function(e){e.serializeVariantIndex(1)},r.load=function(e){return new r},r}(eQ),e1=function(e){function r(){return e.call(this)||this}return U(r,e),r.prototype.serialize=function(e){e.serializeVariantIndex(2)},r.load=function(e){return new r},r}(eQ),e2=function(e){function r(){return e.call(this)||this}return U(r,e),r.prototype.serialize=function(e){e.serializeVariantIndex(3)},r.load=function(e){return new r},r}(eQ),e8=function(e){function r(){return e.call(this)||this}return U(r,e),r.prototype.serialize=function(e){e.serializeVariantIndex(4)},r.load=function(e){return new r},r}(eQ),e6=function(e){function r(){return e.call(this)||this}return U(r,e),r.prototype.serialize=function(e){e.serializeVariantIndex(5)},r.load=function(e){return new r},r}(eQ),e4=function(e){function r(r){var t;return(t=e.call(this)||this).value=r,t}return U(r,e),r.prototype.serialize=function(e){e.serializeVariantIndex(6),this.value.serialize(e)},r.load=function(e){var t=eQ.deserialize(e);return new r(t)},r}(eQ),e3=function(e){function r(r){var t;return(t=e.call(this)||this).value=r,t}return U(r,e),r.prototype.serialize=function(e){e.serializeVariantIndex(7),this.value.serialize(e)},r.load=function(e){var t=eA.deserialize(e);return new r(t)},r}(eQ),e5=function(){function e(e){this.account_address=e}return e.prototype.serialize=function(e){this.account_address.serialize(e)},e.deserialize=function(r){var t=X.deserialize(r);return new e(t)},e}(),e9=function(){function e(){}return e.deserialize=function(e){var r=e.deserializeVariantIndex();switch(r){case 0:return e7.load(e);case 1:return re.load(e);default:throw Error("Unknown variant index for WriteOp: "+r)}},e}(),e7=function(e){function r(){return e.call(this)||this}return U(r,e),r.prototype.serialize=function(e){e.serializeVariantIndex(0)},r.load=function(e){return new r},r}(e9),re=function(e){function r(r){var t;return(t=e.call(this)||this).value=r,t}return U(r,e),r.prototype.serialize=function(e){e.serializeVariantIndex(1),e.serializeBytes(this.value)},r.load=function(e){var t=e.deserializeBytes();return new r(t)},r}(e9),rr=function(){function e(){}return e.serializeArray16U8Array=function(e,r){e.forEach(function(e){r.serializeU8(e[0])})},e.deserializeArray16U8Array=function(e){for(var r=[],t=0;t<16;t++)r.push([e.deserializeU8()]);return r},e.serializeOptionAuthenticationKey=function(e,r){e?(r.serializeOptionTag(!0),e.serialize(r)):r.serializeOptionTag(!1)},e.deserializeOptionAuthenticationKey=function(e){return e.deserializeOptionTag()?Z.deserialize(e):null},e.serializeOptionKeyRotationCapabilityResource=function(e,r){e?(r.serializeOptionTag(!0),e.serialize(r)):r.serializeOptionTag(!1)},e.deserializeOptionKeyRotationCapabilityResource=function(e){return e.deserializeOptionTag()?em.deserialize(e):null},e.serializeOptionScriptFunction=function(e,r){e?(r.serializeOptionTag(!0),e.serialize(r)):r.serializeOptionTag(!1)},e.deserializeOptionScriptFunction=function(e){return e.deserializeOptionTag()?eN.deserialize(e):null},e.serializeOptionWithdrawCapabilityResource=function(e,r){e?(r.serializeOptionTag(!0),e.serialize(r)):r.serializeOptionTag(!1)},e.deserializeOptionWithdrawCapabilityResource=function(e){return e.deserializeOptionTag()?e5.deserialize(e):null},e.serializeTuple2AccessPathWriteOp=function(e,r){e[0].serialize(r),e[1].serialize(r)},e.deserializeTuple2AccessPathWriteOp=function(e){return[$.deserialize(e),e9.deserialize(e)]},e.serializeVectorArgumentAbi=function(e,r){r.serializeLen(e.length),e.forEach(function(e){e.serialize(r)})},e.deserializeVectorArgumentAbi=function(e){for(var r=e.deserializeLen(),t=[],n=0;n<r;n++)t.push(Q.deserialize(e));return t},e.serializeVectorModule=function(e,r){r.serializeLen(e.length),e.forEach(function(e){e.serialize(r)})},e.deserializeVectorModule=function(e){for(var r=e.deserializeLen(),t=[],n=0;n<r;n++)t.push(eg.deserialize(e));return t},e.serializeVectorTypeArgumentAbi=function(e,r){r.serializeLen(e.length),e.forEach(function(e){e.serialize(r)})},e.deserializeVectorTypeArgumentAbi=function(e){for(var r=e.deserializeLen(),t=[],n=0;n<r;n++)t.push(eX.deserialize(e));return t},e.serializeVectorTypeTag=function(e,r){r.serializeLen(e.length),e.forEach(function(e){e.serialize(r)})},e.deserializeVectorTypeTag=function(e){for(var r=e.deserializeLen(),t=[],n=0;n<r;n++)t.push(eQ.deserialize(e));return t},e.serializeVectorBytes=function(e,r){r.serializeLen(e.length),e.forEach(function(e){r.serializeBytes(e)})},e.deserializeVectorBytes=function(e){for(var r=e.deserializeLen(),t=[],n=0;n<r;n++)t.push(e.deserializeBytes());return t},e.serializeVectorTuple2AccessPathWriteOp=function(r,t){t.serializeLen(r.length),r.forEach(function(r){e.serializeTuple2AccessPathWriteOp(r,t)})},e.deserializeVectorTuple2AccessPathWriteOp=function(r){for(var t=r.deserializeLen(),n=[],i=0;i<t;i++)n.push(e.deserializeTuple2AccessPathWriteOp(r));return n},e.serializeVectorU8=function(e,r){r.serializeLen(e.length),e.forEach(function(e){r.serializeU8(e)})},e.deserializeVectorU8=function(e){for(var r=e.deserializeLen(),t=[],n=0;n<r;n++)t.push(e.deserializeU8());return t},e}(),rt=function(){function e(e){this.value=e}var r=e.prototype;return r.serialize=function(e){e.serializeBytes(this.value)},r.hex=function(){return I.from(this.value).toString("hex")},e}(),rn=function(){function e(e,r){this.accountAddress=e,this.authKey=r}return e.prototype.encode=function(){var e=new L;this.accountAddress.serialize(e);var r=I.concat([I.from(e.getBytes()),I.from(this.authKey.value)]),t=i.gW.toWords(r),n=[Number("1")].concat(t);return i.gW.encode("stc",n)},e.decode=function(r){var t=i.gW.decode(r).words.slice(1),n=I.from(i.gW.fromWords(t)),o=n.slice(0,X.LENGTH),a=n.slice(X.LENGTH),s=X.deserialize(new D(o)),u=new rt(a);return new e(s,u)},e}(),ri=function(){function e(e){this.message=e}return e.prototype.serialize=function(e){e.serializeBytes(this.message)},e.deserialize=function(r){var t=r.deserializeBytes();return new e(t)},e}(),ro=function(){function e(e,r,t,n){this.account=e,this.message=r,this.authenticator=t,this.chain_id=n}return e.prototype.serialize=function(e){this.account.serialize(e),this.message.serialize(e),this.authenticator.serialize(e),this.chain_id.serialize(e)},e.deserialize=function(r){var t=X.deserialize(r),n=ri.deserialize(r),i=eH.deserialize(r),o=er.deserialize(r);return new e(t,n,i,o)},e}(),ra=t(89509).Buffer,rs=t(91094).sha3_256,ru=function(){function e(e){if(e){var r=new Uint8Array(ra.from("STARCOIN::"+e)),t=rs.create();t.update(r),this.salt=new Uint8Array(t.arrayBuffer())}}var r=e.prototype;return r.crypto_hash=function(e){var r=rs.create();return this.salt&&r.update(this.salt),r.update((0,o.lE)(e)),(0,a.addHexPrefix)(r.hex())},r.get_salt=function(){return this.salt},e}();function rc(e){return"0x"+I.from(new Uint8Array(e)).toString("hex")}function rl(e,r){e.startsWith("0x")&&(e=e.substring(2)),r?e.length<r&&(e=rf(e,r)):e.length%2!=0&&(e="0"+e);var t=I.from(e,"hex");return new Uint8Array(t)}function rf(e,r,t){return Array(r-e.length+1).join(t||"0")+e}var rh=function(e){try{return Promise.resolve((0,s.$3)((0,a.stripHexPrefix)(e))).then(o.Dv)}catch(e){return Promise.reject(e)}};function rd(e){var r=new L;return e.serialize(r),rc(r.getBytes())}function rv(e){var r,t,n,i=(0,o.lE)(e),a=(r=new D(i),eB.deserialize(r));if(a.authenticator instanceof eM)n={Ed25519:{public_key:(0,o.Dv)(a.authenticator.public_key.value),signature:(0,o.Dv)(a.authenticator.signature.value)}};else{var s=a.authenticator;n={MultiEd25519:{public_key:(0,o.Dv)(s.public_key.value()),signature:(0,o.Dv)(s.signature.value())}}}var u=a.raw_txn,c=(t=new L,u.payload.serialize(t),(0,o.Dv)(t.getBytes()));return{transaction_hash:new ru("SignedUserTransaction").crypto_hash(i),raw_txn:{sender:rg(u.sender),sequence_number:u.sequence_number,payload:c,max_gas_amount:u.max_gas_amount,gas_unit_price:u.gas_unit_price,gas_token_code:u.gas_token_code,expiration_timestamp_secs:u.expiration_timestamp_secs,chain_id:u.chain_id.id},authenticator:n}}function rp(e){var r=new D((0,o.lE)((0,a.addHexPrefix)(e)));return eY.load(r)}function rm(e){var r=rl(e,32);return X.deserialize(new D(r))}function rg(e){return rc(e.value.map(function(e){return e[0]}))}function r_(e){if("Bool"===e)return new eZ;if("U8"===e)return new e0;if("U128"===e)return new e2;if("U64"===e)return new e1;if("Address"===e)return new e8;if("Signer"===e)return new e6;if("Vector"in e)return new e4(r_(e.Vector));if("Struct"in e)return new e3(ry(e.Struct));throw Error("invalid type tag: "+e)}function ry(e){return new eA(rm(e.address),new ep(e.module),new ep(e.name),e.type_params?e.type_params.map(function(e){return r_(e)}):[])}function rz(e){return{module:e.module.value,name:e.name.value,type_params:e.type_params.map(function(e){return rw(e)}),address:rg(e.address)}}function rw(e){if(e instanceof e8)return"Address";if(e instanceof eZ)return"Bool";if(e instanceof e0)return"U8";if(e instanceof e1)return"U64";if(e instanceof e2)return"U128";if(e instanceof e6)return"Signer";if(e instanceof e3)return{Struct:rz(e.value)};if(e instanceof e4)return{Vector:rw(e.value)};throw TypeError("invalid bcs type tag: "+e)}function rb(e,r){void 0===r&&(r=O.SINGLE);var t=u.sha3_256.create();t.update(rl(e)),t.update(rl((0,o.Dv)(r)));var n=t.hex();return(0,a.addHexPrefix)(n)}function rk(e,r){void 0===r&&(r=O.SINGLE);var t=u.sha3_256.create();t.update(rl(e)),t.update(rl((0,o.Dv)(r)));var n=t.hex(),i=n.slice(n.length/2);return(0,a.addHexPrefix)(i)}function rE(e,r){void 0===r&&(r="");var t=rm(e),n=new rt(I.from(r,"hex"));return new rn(t,n).encode()}var rP={__proto__:null,privateKeyToPublicKey:rh,bcsDecode:function(e,r){var t=new D((0,o.lE)(r));return e.deserialize(t)},bcsEncode:rd,decodeSignedUserTransaction:rv,decodeTransactionPayload:function(e){var r=(0,o.lE)(e),t=new D(r),n=eK.deserialize(t);if(n instanceof eq){var i=n.value;return{Script:{code:rc(i.code),ty_args:i.ty_args.map(function(e){return rw(e)}),args:i.args.map(function(e){return(0,o.Dv)(e)})}}}if(n instanceof eJ){var a=n.value;return{ScriptFunction:{func:{address:rg(a.module.address),module:a.module.name.value,functionName:a.func.value},ty_args:a.ty_args.map(function(e){return rw(e)}),args:a.args.map(function(e){return(0,o.Dv)(e)})}}}if(n instanceof eY){var s=n.value;return{Package:{package_address:rg(s.package_address),modules:s.modules.map(function(e){return{code:rc(e.code)}}),init_script:null===s.init_script?void 0:{func:{address:rg(s.init_script.module.address),module:s.init_script.module.name.value,functionName:s.init_script.func.value},args:s.init_script.args.map(function(e){return(0,o.Dv)(e)}),ty_args:s.init_script.ty_args.map(function(e){return rw(e)})}}}}throw TypeError("cannot decode bcs data "+n)},packageHexToTransactionPayload:rp,packageHexToTransactionPayloadHex:function(e){return rd(rp(e))},addressToSCS:rm,addressFromSCS:rg,typeTagToSCS:r_,structTagToSCS:ry,structTagFromSCS:rz,typeTagFromSCS:rw,publicKeyToAuthKey:rb,publicKeyToAddress:rk,encodeReceiptIdentifier:rE,decodeReceiptIdentifier:function(e){var r=rn.decode(e);return{accountAddress:(0,a.stripHexPrefix)(rg(r.accountAddress)),authKey:r.authKey.hex()}},publicKeyToReceiptIdentifier:function(e){var r=rk(e),t=rb(e);return rE((0,a.stripHexPrefix)(r),(0,a.stripHexPrefix)(t))},stringToBytes:function(e){var r,t,n=[];r=e.length;for(var i=0;i<r;i++)(t=e.charCodeAt(i))>=65536&&t<=1114111?(n.push(t>>18&7|240),n.push(t>>12&63|128),n.push(t>>6&63|128),n.push(63&t|128)):t>=2048&&t<=65535?(n.push(t>>12&15|224),n.push(t>>6&63|128),n.push(63&t|128)):t>=128&&t<=2047?(n.push(t>>6&31|192),n.push(63&t|128)):n.push(255&t);return n},bytesToString:function(e){if("string"==typeof e)return e;for(var r="",t=0;t<e.length;t++){var n=e[t].toString(2),i=n.match(/^1+?(?=0)/);if(i&&8==n.length){for(var o=i[0].length,a=e[t].toString(2).slice(7-o),s=1;s<o;s++)a+=e[s+t].toString(2).slice(2);r+=String.fromCharCode(parseInt(a,2)),t+=o-1}else r+=String.fromCharCode(e[t])}return r}},rI=function(e){try{return Promise.resolve(rh(e)).then(function(r){var t=rk(r),n=rb(r),i=rE((0,a.stripHexPrefix)(t),(0,a.stripHexPrefix)(n));return{privateKey:e,publicKey:r,address:t,authKey:n,receiptIdentifier:i}})}catch(e){return Promise.reject(e)}};function rT(){var e=s.P6.randomPrivateKey(),r=I.from(e).toString("hex");return(0,a.addHexPrefix)(r)}function rx(e){return(0,o.Dv)(e.privateKey())}function rN(e){var r=e.publicKey();return(0,o.Dv)(r.value())}function rU(e){return rk(rN(e),O.MULTI)}function rB(e){var r=rU(e);return rE((0,a.stripHexPrefix)(r))}var rA=function(){function e(e){this.cur_idx=0,this.toks=e}var r=e.prototype;return r.next_tok=function(){var e=this.toks[this.cur_idx++];if(void 0===e)throw Error("out of token, this should not happen");return e},r.peek=function(){return this.toks[this.cur_idx]},r.consume_tok=function(e){var r=this.next_tok();if(r!=e)throw Error("expected tok: "+e+", got: "+r)},r.parse_comma_list=function(e,r,t){var n=[];if(this.peek()!==r)for(;n.push(e(this)),this.peek()!==r&&(this.consume_tok("Comma"),this.peek()!==r||!t););return n},r.parseTypeTag=function(){var e=this.next_tok();if("U8Type"===e)return"U8";if("U64Type"===e)return"U64";if("U128Type"===e)return"U128";if("BoolType"===e)return"Bool";if("AddressType"===e)return"Address";if("VectorType"===e){this.consume_tok("Lt");var r=this.parseTypeTag();return this.consume_tok("Gt"),{Vector:r}}if(void 0!==e.Address){var t=e.Address;this.consume_tok("ColonColon");var n=this.next_tok();if(void 0===n.Name)throw Error("expected name, got: "+n);var i=n.Name;this.consume_tok("ColonColon");var o=this.next_tok();if(void 0===o.Name)throw Error("expected name, got: "+n);var a=o.Name,s=[];return"Lt"===this.peek()&&(this.consume_tok("Lt"),s=this.parse_comma_list(function(e){return e.parseTypeTag()},"Gt",!0),this.consume_tok("Gt")),{Struct:{address:t,module:i,name:a,type_params:s}}}throw Error("unexpected token "+e+", expected type tag")},e}();function rS(e,r){var t=(function(e){for(var r=[];;){var t=function(e){if(0!==e.length){var r=e[0];if("<"===r)return["Lt",1];if(">"===r)return["Gt",1];if(","===r)return["Comma",1];if(":"===r){if(":"===e[1])return["ColonColon",2];throw Error("unrecognized token")}if("0"===r&&["x","X"].includes(e[1])){if(l()(e[2])){for(var t="0x",n=2;n<e.length;n++)if(l()(e[n]))t=t.concat(e[n]);else break;return[{Address:t},t.length]}throw Error("unrecognized token")}if(h()(r))return function(e){for(var r="",t=0;t<e.length;){var n=e[t++];if(h()(n))r=r.concat(n);else if(m()(n)){for(var i=n;t<e.length;){var o=e[t++];if(v()(o))i=i.concat(o);else break}var a=r.length+i.length;switch(i){case"u8":return[{U8:r},a];case"u64":return[{U64:r},a];case"u128":return[{U128:r},a];default:throw Error("invalid suffix")}}else break}return[{U64:r},r.length]}(e);if("b"===r&&'"'===e[1]){for(var i="",o=2;;){if(o>=e.length)throw Error("unrecognized token");var a=e[o++];if('"'===a)break;if(("string"==typeof a?a.charCodeAt(0):a)<=127)i=i.concat(a);else throw Error("unrecognized token")}return[{Bytes:i},i.length+3]}if("x"===r&&'"'===e[1]){for(var s="",u=2;;){if(u>=e.length)throw Error("unrecognized token");var c=e[u++];if('"'===c)break;if(l()(c))s=s.concat(c);else throw Error("unrecognized token")}return[{Bytes:s},s.length+3]}if(m()(r)||["-","_"].includes(r)){for(var f="",d=0;d<e.length;d++)if(v()(e[d])||["-","_"].includes(e[d]))f=f.concat(e[d]);else break;return[function(e){switch(e){case"u8":return"U8Type";case"u64":return"U64Type";case"u128":return"U128Type";case"bool":return"BoolType";case"address":return"AddressType";case"vector":return"VectorType";case"true":return"True";case"false":return"False";default:return{Name:e}}}(f),f.length]}if(_()(r)){for(var p="",g=0;g<e.length;g++)if(_()(e[g]))p=p.concat(e[g]);else break;return[{WhiteSpace:p},p.length]}throw Error("unrecognized token")}}(e);if(void 0===t)break;var n=t[0],i=t[1];r.push(n),e=e.substring(i)}return r})(e).filter(function(e){return void 0===e.WhiteSpace});t.push("EOF");var n=new rA(t),i=r(n);return n.consume_tok("EOF"),i}function rO(e){return rS(e,function(e){return e.parseTypeTag()})}var rV=t(27759).version,rR=new y.Yd(rV);function rC(e,r){e&&"object"==typeof e||rR.throwArgumentError("invalid object","object",e),Object.keys(e).forEach(function(t){r[t]||rR.throwArgumentError("invalid object key - "+t,"transaction:"+t,e)})}var rj=function(e,r,t,n){try{var i=(0,o.lE)((0,a.addHexPrefix)(t)),s=rk(t),u=rm(s),c=(0,o.lE)((0,a.addHexPrefix)(n)),l=rG(c,i),f=new er(r),h=new ro(u,e,l,f),d=rd(h),v=(0,o.Dv)(d);return Promise.resolve(v)}catch(e){return Promise.reject(e)}},rD=function(e,r){try{var t=new Uint8Array(I.from(e,"utf8")),n=new ri(t),i=rL(n);return Promise.resolve((0,s.$3)((0,a.stripHexPrefix)(r))).then(function(e){var t=(0,o.Dv)(e);return Promise.resolve((0,s.Xx)(i,(0,a.stripHexPrefix)(r))).then(function(e){var r=(0,o.Dv)(e);return Promise.resolve({publicKey:t,signature:r})})})}catch(e){return Promise.reject(e)}};function rG(e,r){var t=new ef(r),n=new eh(e);return new eM(t,n)}function rL(e){var r,t,n=new ru("SigningMessage").get_salt(),i=(r=new L,e.serialize(r),r.getBytes());return(t=new Uint8Array(n.length+i.length)).set(n,0),t.set(i,n.length),t}function rF(e){var r,t=(0,o.lE)(e);return r=new D(t),ro.deserialize(r)}var rH=new y.Yd(rV),rM={test:{chainId:255,name:"test",_defaultProvider:function e(r){var t=function(e,t){return e.JsonRpcProvider?new e.JsonRpcProvider(t.jsonrpc,r):null};return t.renetwork=function(r){return e(r)},t}("test")},dev:{chainId:254,name:"dev"},barnard:{chainId:251,name:"barnard"},halley:{chainId:3,name:"halley"},proxima:{chainId:2,name:"proxima"},main:{chainId:1,name:"main"}};function rW(e){if(null==e)return null;if("number"==typeof e){for(var r in rM){var t,n=rM[r];if(n.chainId==e)return{name:n.name,chainId:n.chainId,_defaultProvider:n._defaultProvider||null}}return{chainId:e,name:"unknown"}}if("string"==typeof e){var i=rM[e];return null==i?null:{name:i.name,chainId:i.chainId,_defaultProvider:i._defaultProvider||null}}var o=rM[e.name];if(!o)return"number"!=typeof e.chainId&&rH.throwArgumentError("invalid network chainId","network",e),e;e.chainId!==o.chainId&&rH.throwArgumentError("network chainId mismatch","network",e);var a=e._defaultProvider||null;return null==a&&o._defaultProvider&&(a=(t=o._defaultProvider)&&"function"==typeof t.renetwork?o._defaultProvider.renetwork(e):o._defaultProvider),{name:e.name,chainId:o.chainId,_defaultProvider:a}}var rK=new y.Yd("abstract-provider/5.0.5"),rq=function(){function e(){rK.checkAbstract(this instanceof e?this.constructor:void 0,e),(0,b.zG)(this,"_isProvider",!0)}var r=e.prototype;return r.getBalance=function(e,r,t){try{return void 0===r&&(r="0x1::STC::STC"),Promise.resolve(this.getResource(e,"0x1::Account::Balance<"+r+">",t)).then(function(e){if(void 0!==e)return e.token.value})}catch(e){return Promise.reject(e)}},r.getBalances=function(e,r){try{return Promise.resolve(this.getResources(e,r)).then(function(e){if(void 0!==e){var r={};for(var t in e){var n=rO(t);if("object"==typeof n&&void 0!==n.Struct){var i=n.Struct;"Account"===i.module&&"Balance"===i.name&&(r[V(i.type_params[0].Struct)]=e[t].token.value)}}return r}})}catch(e){return Promise.reject(e)}},r.getSequenceNumber=function(e,r){try{return Promise.resolve(this.getResource(e,"0x1::Account::Account",r)).then(function(e){if(void 0!==e)return e.sequence_number})}catch(e){return Promise.reject(e)}},r.addListener=function(e,r){return this.on(e,r)},r.removeListener=function(e,r){return this.off(e,r)},e.isProvider=function(e){return!!(e&&e._isProvider)},e}(),rY=new y.Yd(rV);function rJ(e){return e.value.reduce(function(e,r){var t,n=r[0],i=r[1];return N({},e,((t={})[n]=r$(i),t))},{})}function r$(e){if("Bool"in e)return e.Bool;if("U8"in e)return e.U8;if("U64"in e)return rX.bigint(e.U64);if("U128"in e)return rX.bigint(e.U128);if("Address"in e)return e.Address;if("Bytes"in e)return(0,o.$P)(e.Bytes);if("Vector"in e)return e.Vector.map(function(e){return r$(e)});if("Struct"in e)return e.Struct.value.reduce(function(e,r){var t,n=r[0],i=r[1];return N({},e,((t={})[n]=r$(i),t))},{});throw Error("invalid annotated move value, "+JSON.stringify(e))}var rX=function(){function e(){rY.checkNew(this instanceof e?this.constructor:void 0,e),this.formats=this.getDefaultFormats()}var r=e.prototype;return r.getDefaultFormats=function(){var r={},t=this.address.bind(this);this.bigNumber.bind(this);var n=this.blockTag.bind(this),i=this.data.bind(this),o=this.hash.bind(this),a=this.hex.bind(this),s=this.number.bind(this),u=this.u64.bind(this);e.bigint.bind(this);var c=this.u8.bind(this),l=this.u256.bind(this);r.rawTransaction={sender:t,sequence_number:u,payload:i,max_gas_amount:u,gas_unit_price:u,gas_token_code:function(e){return e},expiration_timestamp_secs:u,chain_id:c},r.signedUserTransaction={transaction_hash:o,raw_txn:this.rawUserTransaction.bind(this),authenticator:this.transactionAuthenticator.bind(this)},r.blockMetadata={parent_hash:o,timestamp:u,author:t,author_auth_key:a,uncles:u,number:u,chain_id:c,parent_gas_used:u};var f={block_hash:e.allowNull(o),block_number:e.allowNull(u),transaction_hash:e.allowNull(o),transaction_index:e.allowNull(s)};return r.transaction=N({block_metadata:e.allowNull(this.blockMetadata.bind(this),null),user_transaction:e.allowNull(this.signedUserTransaction.bind(this),null)},f),r.blockBody={Full:e.allowNull(e.arrayOf(this.signedUserTransaction.bind(this))),Hashes:e.allowNull(e.arrayOf(o))},r.blockHeader={block_hash:o,parent_hash:o,timestamp:u,number:u,author:t,author_auth_key:e.allowNull(a,null),txn_accumulator_root:o,block_accumulator_root:o,state_root:o,gas_used:u,difficulty:l,nonce:u,body_hash:o,chain_id:c},r.blockWithTransactions={header:function(t){return e.check(r.blockHeader,t)},body:function(e){return e}},r.block={header:function(t){return e.check(r.blockHeader,t)},body:function(t){return e.check(r.blockBody,t)},confirmations:s},r.transactionInfo=N({state_root_hash:o,event_root_hash:o,gas_used:u,status:this.transactionVmStatus.bind(this),txn_events:e.allowNull(e.arrayOf(this.transactionEvent.bind(this)),null)},f),r.transactionEvent=N({data:a,type_tags:this.typeTag.bind(this),event_key:a,event_seq_number:u},f),r.transactionOutput={gas_used:u,status:this.transactionVmStatus.bind(this),events:e.allowNull(e.arrayOf(this.transactionEvent.bind(this))),write_set:e.allowNull(e.arrayOf(this.transactionWriteAction.bind(this)))},r.blockWithTransactions=(0,b.DC)(r.block),r.blockWithTransactions.transactions=e.allowNull(e.arrayOf(this.transactionResponse.bind(this))),r.eventFilter={from_block:e.allowNull(n),to_block:e.allowNull(n),event_keys:e.arrayOf(a),limit:e.allowNull(s)},r},r.typeTag=function(e){return e},r.moveValue=function(e){return r$(e)},r.moveStruct=function(e){return rJ(e)},r.transactionAuthenticator=function(e){return e},r.rawUserTransaction=function(r){return e.check(this.formats.rawTransaction,r)},r.signedUserTransaction=function(r){return e.check(this.formats.signedUserTransaction,r)},r.blockMetadata=function(r){return e.check(this.formats.blockMetadata,r)},r.transactionOutput=function(r){return e.check(this.formats.transactionOutput,r)},r.transactionWriteAction=function(e){return e},r.transactionEvent=function(r){return e.check(this.formats.transactionEvent,r)},r.transactionVmStatus=function(e){if("string"==typeof e){if(["Executed","OutOfGas","MiscellaneousError"].includes(e))return e;throw Error("invalid txn vm_status: "+e)}if("object"==typeof e){if(e.MoveAbort)return{MoveAbort:{location:e.MoveAbort.location,abort_code:this.u64(e.MoveAbort.abort_code)}};if(e.ExecutionFailure)return e;if(e.Discard)return{Discard:{status_code:this.u64(e.Discard.status_code)}};throw Error("invalid txn vm_status: "+JSON.stringify(e))}throw TypeError("invalid txn vm_status type "+e)},r.number=function(e){return"0x"===e?0:w.O$.from(e).toNumber()},r.u8=function(e){if("string"==typeof e)return Number.parseInt(e,10);if("number"==typeof e)return e;throw Error("invalid u8: "+e)},r.u64=function(r){return e.bigint(r)},r.u128=function(r){return e.bigint(r)},r.u256=function(e){if("string"==typeof e)return e;if("number"==typeof e)return e.toString();throw Error("invalid bigint: "+e)},e.bigint=function(e){if("string"==typeof e){var r=BigInt(e);return r>Number.MAX_SAFE_INTEGER?r:Number.parseInt(e)}if("number"==typeof e)return e;throw TypeError("invalid bigint: "+e)},r.bigNumber=function(e){return w.O$.from(e)},r.boolean=function(e){if("boolean"==typeof e)return e;if("string"==typeof e){if("true"===(e=e.toLowerCase()))return!0;if("false"===e)return!1}throw Error("invalid boolean - "+e)},r.hex=function(e,r){return"string"==typeof e&&(r||"0x"===e.slice(0,2)||(e="0x"+e),(0,o.A7)(e))?e.toLowerCase():rY.throwArgumentError("invalid hex","value",e)},r.data=function(e,r){var t=this.hex(e,r);if(t.length%2!=0)throw Error("invalid data; odd-length - "+e);return t},r.address=function(e){"string"!=typeof e&&rY.throwArgumentError("invalid address","address",e);var r=this.hex(e,!0);return 16!==(0,o.E1)(r)?rY.throwArgumentError("invalid address","value",e):(0,a.addHexPrefix)(e)},r.blockTag=function(e){if("earliest"===e)return 0;if("number"==typeof e)return e;throw Error("invalid blockTag")},r.hash=function(e,r){var t=this.hex(e,r);return 32!==(0,o.E1)(t)?rY.throwArgumentError("invalid hash","value",e):t},r._block=function(r){var t=e.check(this.formats.block,r),n=t.body.Full?t.body.Full:t.body.Hashes;return{header:t.header,transactions:n,confirmations:t.confirmations}},r.blockWithTxnHashes=function(e){var r=this._block(e),t=r.header,n=r.transactions,i=r.confirmations;return{header:t,transactions:n.map(function(e){return e.transaction_hash}),confirmations:i}},r.blockWithTransactions=function(e){var r=this._block(e);return{header:r.header,transactions:r.transactions,confirmations:r.confirmations}},r.transactionResponse=function(e){return e},r.userTransactionData=function(e){return rv(e)},r.transactionInfo=function(r){return e.check(this.formats.transactionInfo,r)},r.topics=function(e){var r=this;return Array.isArray(e)?e.map(function(e){return r.topics(e)}):void 0!=e?this.hash(e,!0):null},r.filter=function(r){return e.check(this.formats.eventFilter,r)},e.check=function(e,r){var t={};for(var n in e)try{var i=e[n](r[n]);void 0!==i&&(t[n]=i)}catch(e){throw e.checkKey=n,e.checkValue=r[n],e}return t},e.allowNull=function(e,r){return function(t){return void 0==t?r:e(t)}},e.allowFalsish=function(e,r){return function(t){return t?e(t):r}},e.arrayOf=function(e){return function(r){if(!Array.isArray(r))throw TypeError("not an array");var t=[];return r.forEach(function(r){t.push(e(r))}),t}},e}();function rQ(e,r){try{var t=e()}catch(e){return r(e)}return t&&t.then?t.then(void 0,r):t}var rZ=new y.Yd(rV);function r0(e){return void 0===e||0===e.length?"*":e.join("|")}function r1(e){if("string"==typeof e){if(e=e.toLowerCase(),32===(0,o.E1)(e))return"tx:"+e;if(-1===e.indexOf(":"))return e}else if(Array.isArray(e))return"filter:"+r0(e);else if("object"==typeof e)return"filter:"+r0(e.event_keys);throw Error("invalid event - "+e)}function r2(){return new Date().getTime()}var r8={pending:"pending",block:"block",network:"network",poll:"poll",filter:"filter",tx:"tx"},r6=[r8.pending,r8.block,r8.network,r8.poll],r4=function(){function e(e,r,t){(0,b.zG)(this,"tag",e),(0,b.zG)(this,"listener",r),(0,b.zG)(this,"once",t)}return e.prototype.pollable=function(){return this.tag.indexOf(":")>=0||r6.indexOf(this.tag)>=0},x(e,[{key:"event",get:function(){switch(this.type){case"tx":return this.hash;case"filter":return this.filter}return this.tag}},{key:"type",get:function(){return this.tag.split(":")[0]}},{key:"hash",get:function(){var e=this.tag.split(":");return"tx"!==e[0]?null:e[1]}},{key:"filter",get:function(){var e,r=this.tag.split(":");if("filter"!==r[0])return null;var t=""===(e=r[1])||"*"===e?[]:e.split("|"),n={};return t.length>0&&(n.event_keys=t),n}}]),e}(),r3={getChainInfo:"getChainInfo",getNodeInfo:"getNodeInfo",sendTransaction:"sendTransaction",getBlock:"getBlock",getTransactionByHash:"getTransactionByHash",getTransactionInfo:"getTransactionInfo",getEventsOfTransaction:"getEventsOfTransaction",getEvents:"getEvents",call:"call",callV2:"callV2",getCode:"getCode",getResource:"getResource",getAccountState:"getAccountState",getGasPrice:"getGasPrice",dryRun:"dryRun",dryRunRaw:"dryRunRaw"},r5=1,r9=function(e){function r(t){var n;if(rZ.checkNew(this instanceof r?this.constructor:void 0,rq),(n=e.call(this)||this)._events=[],n._emitted={block:-2},n.formatter=(this instanceof r?this.constructor:void 0).getFormatter(),(0,b.zG)(A(n),"anyNetwork","any"===t),n.anyNetwork&&(t=n.detectNetwork()),t instanceof Promise)n._networkPromise=t,t.catch(function(e){}),n._ready().catch(function(e){});else{var i=rW(t);i?((0,b.zG)(A(n),"_network",i),n.emit("network",i,null)):rZ.throwArgumentError("invalid network","network",t)}return n._maxInternalBlockNumber=-1024,n._lastBlockNumber=-2,n._pollingInterval=4e3,n._fastQueryDate=0,n}U(r,e);var t=r.prototype;return t._ready=function(){try{var e=this,r=function(){return e._network},t=function(){if(null==e._network){var r=function(){function r(){t||rZ.throwError("no network detected",y.Yd.errors.UNKNOWN_ERROR,{}),null==e._network&&(e.anyNetwork?e._network=t:(0,b.zG)(e,"_network",t),e.emit("network",t,null))}var n=function(){if(null==t)return Promise.resolve(e.detectNetwork()).then(function(e){t=e})}();return n&&n.then?n.then(r):r(n)},t=null,n=function(){if(e._networkPromise){var r=rQ(function(){return Promise.resolve(e._networkPromise).then(function(e){t=e})},function(){});if(r&&r.then)return r.then(function(){})}}();return n&&n.then?n.then(r):r(n)}}();return Promise.resolve(t&&t.then?t.then(r):r(t))}catch(e){return Promise.reject(e)}},r.getFormatter=function(){return null==n&&(n=new rX),n},t._getInternalBlockNumber=function(e){try{var r=this;return Promise.resolve(r._ready()).then(function(){function t(e){if(n)return e;var t=r2(),i=(0,b.mE)({blockNumber:r.perform(r3.getChainInfo,{}).then(function(e){return e.head.number},function(e){return e}),networkError:r.getNetwork().then(function(e){return null},function(e){return e})}).then(function(e){var n=e.blockNumber,o=e.networkError;if(o)throw r._internalBlockNumber===i&&(r._internalBlockNumber=null),o;var a=r2();return(n=w.O$.from(n).toNumber())<r._maxInternalBlockNumber&&(n=r._maxInternalBlockNumber),r._maxInternalBlockNumber=n,r._setFastBlockNumber(n),{blockNumber:n,reqTime:t,respTime:a}});return r._internalBlockNumber=i,Promise.resolve(i).then(function(e){return e.blockNumber})}var n,i=r._internalBlockNumber,o=function(){if(e>0&&r._internalBlockNumber)return Promise.resolve(i).then(function(r){if(r2()-r.respTime<=e)return n=1,r.blockNumber})}();return o&&o.then?o.then(t):t(o)})}catch(e){return Promise.reject(e)}},t.poll=function(){try{var e=this,r=r5++,t=[];return Promise.resolve(e._getInternalBlockNumber(100+e.pollingInterval/2)).then(function(n){if(e._setFastBlockNumber(n),e.emit("poll",r,n),n===e._lastBlockNumber){e.emit("didPoll",r);return}if(-2===e._emitted.block&&(e._emitted.block=n-1),Math.abs(e._emitted.block-n)>1e3)rZ.warn("network block skew detected; skipping block events"),e.emit("error",rZ.makeError("network block skew detected",y.Yd.errors.NETWORK_ERROR,{blockNumber:n,event:"blockSkew",previousBlockNumber:e._emitted.block})),e.emit(r8.block,n);else for(var i=e._emitted.block+1;i<=n;i++)e.emit(r8.block,i);return e._emitted.block!==n&&(e._emitted.block=n,Object.keys(e._emitted).forEach(function(r){if(r!==r8.block){var t=e._emitted[r];"pending"!==t&&n-t>12&&delete e._emitted[r]}})),-2===e._lastBlockNumber&&(e._lastBlockNumber=n-1),e._events.forEach(function(r){switch(r.type){case r8.tx:var i=r.hash,o=e.getTransactionInfo(i).then(function(r){return r&&null!=r.block_number&&(e._emitted["t:"+i]=r.block_number,e.emit(i,r)),null}).catch(function(r){e.emit("error",r)});t.push(o);break;case r8.filter:var a=r.filter;a.from_block=e._lastBlockNumber+1,a.to_block=n;var s=e.getTransactionEvents(a).then(function(r){0!==r.length&&r.forEach(function(r){e._emitted["b:"+r.block_hash]=r.block_number,e._emitted["t:"+r.transaction_hash]=r.block_number,e.emit(a,r)})}).catch(function(r){e.emit("error",r)});t.push(s)}}),e._lastBlockNumber=n,Promise.all(t).then(function(){e.emit("didPoll",r)}),null})}catch(e){return Promise.reject(e)}},t.getNetwork=function(){try{var e=this;return Promise.resolve(e._ready()).then(function(r){return Promise.resolve(e.detectNetwork()).then(function(t){var n,i=function(){if(r.chainId!==t.chainId){var i=function(i){if(n)return i;var o=rZ.makeError("underlying network changed",y.Yd.errors.NETWORK_ERROR,{event:"changed",network:r,detectedNetwork:t});throw e.emit("error",o),o},o=function(){if(e.anyNetwork)return e._network=t,e._lastBlockNumber=-2,e._fastBlockNumber=null,e._fastBlockNumberPromise=null,e._fastQueryDate=0,e._emitted.block=-2,e._maxInternalBlockNumber=-1024,e._internalBlockNumber=null,e.emit("network",t,r),Promise.resolve(new Promise(function(e){setTimeout(e,0)})).then(function(){return n=1,e._network})}();return o&&o.then?o.then(i):i(o)}}();return i&&i.then?i.then(function(e){return n?e:r}):n?i:r})})}catch(e){return Promise.reject(e)}},t._getFastBlockNumber=function(){var e=this,r=r2();return r-this._fastQueryDate>2*this._pollingInterval&&(this._fastQueryDate=r,this._fastBlockNumberPromise=this.getBlockNumber().then(function(r){return(null==e._fastBlockNumber||r>e._fastBlockNumber)&&(e._fastBlockNumber=r),e._fastBlockNumber})),this._fastBlockNumberPromise},t._setFastBlockNumber=function(e){(null==this._fastBlockNumber||!(e<this._fastBlockNumber))&&(this._fastQueryDate=r2(),(null==this._fastBlockNumber||e>this._fastBlockNumber)&&(this._fastBlockNumber=e,this._fastBlockNumberPromise=Promise.resolve(e)))},t.waitForTransaction=function(e,r,t){try{var n=this;return null==r&&(r=1),Promise.resolve(n.getTransactionInfo(e)).then(function(i){return(i?i.confirmations:0)>=r?Promise.resolve(i):new Promise(function(i,o){var a=null,s=!1,u=function t(o){!(o.confirmations<r)&&(a&&clearTimeout(a),s||(s=!0,n.removeListener(e,t),i(o)))};n.on(e,u),"number"==typeof t&&t>0&&(a=setTimeout(function(){s||(a=null,s=!0,n.removeListener(e,u),o(rZ.makeError("timeout exceeded",y.Yd.errors.TIMEOUT,{timeout:t})))},t)).unref&&a.unref()})})}catch(e){return Promise.reject(e)}},t.getBlockNumber=function(){try{return Promise.resolve(this._getInternalBlockNumber(0))}catch(e){return Promise.reject(e)}},t.getGasPrice=function(){try{var e=this;return Promise.resolve(e.getNetwork()).then(function(){return Promise.resolve(e.perform(r3.getGasPrice,{})).then(function(r){return e.formatter.u64(r)})})}catch(e){return Promise.reject(e)}},t.getCode=function(e,t){try{var n=this;return Promise.resolve(n.getNetwork()).then(function(){var i=r.getModuleId;return Promise.resolve(e).then(function(e){return Promise.resolve((0,b.mE)({moduleId:i.call(r,e),blockTag:t})).then(function(e){return Promise.resolve(n.perform(r3.getCode,e)).then(function(e){if(e)return(0,o.Dv)(e)})})})})}catch(e){return Promise.reject(e)}},t.getResource=function(e,r,t){try{var n=this;return Promise.resolve(n.getNetwork()).then(function(){return Promise.resolve((0,b.mE)({address:e,structTag:r,blockTag:t})).then(function(e){return Promise.resolve(n.perform(r3.getResource,e)).then(function(e){if(e)return n.formatter.moveStruct(e)})})})}catch(e){return Promise.reject(e)}},t.getResources=function(e,r){try{var t=this;return Promise.resolve(t.getNetwork()).then(function(){return Promise.resolve((0,b.mE)({address:e,blockTag:r})).then(function(e){return Promise.resolve(t.perform(r3.getAccountState,e)).then(function(e){if(e)return Object.entries(e.resources).reduce(function(e,r){var n,i=r[0],o=r[1];return N({},e,((n={})[i]=t.formatter.moveStruct(o),n))},{})})})})}catch(e){return Promise.reject(e)}},t._wrapTransaction=function(e,r){var t=this;if(null!=r&&32!==(0,o.E1)(r))throw Error("invalid response - sendTransaction");var n=e;return null!=r&&e.transaction_hash!==r&&rZ.throwError("Transaction hash mismatch from Provider.sendTransaction.",y.Yd.errors.UNKNOWN_ERROR,{expectedHash:e.transaction_hash,returnedHash:r}),n.wait=function(r){try{return 0!==r&&(t._emitted["t:"+e.transaction_hash]="pending"),Promise.resolve(t.waitForTransaction(e.transaction_hash,r)).then(function(i){return null==i&&0===r?null:(t._emitted["t:"+e.transaction_hash]=i.block_number,n.block_hash=i.block_hash,n.block_number=i.block_number,n.confirmations=r,"Executed"!==i.status&&rZ.throwError("transaction failed",y.Yd.errors.CALL_EXCEPTION,{transactionHash:e.transaction_hash,transaction:e,receipt:i}),i)})}catch(e){return Promise.reject(e)}},n},t.sendTransaction=function(e){try{var r=this;return Promise.resolve(r.getNetwork()).then(function(){return Promise.resolve(e).then(function(e){var t=r.formatter.userTransactionData(e);return rQ(function(){return Promise.resolve(r.perform(r3.sendTransaction,{signedTransaction:e})).then(function(){return r._wrapTransaction(t)})},function(e){throw e.transaction=t,e.transactionHash=t.transaction_hash,e})})})}catch(e){return Promise.reject(e)}},r.getModuleId=function(e){return"string"==typeof e?e:e.address+"::"+e.name},t._getFilter=function(e){try{var r=this;return Promise.resolve(e).then(function(e){var t=r.formatter,n=t.filter;return Promise.resolve((0,b.mE)(e)).then(function(e){return n.call(t,e)})})}catch(e){return Promise.reject(e)}},t.call=function(e,r){try{var t=this;return Promise.resolve(t.getNetwork()).then(function(){return Promise.resolve((0,b.mE)({request:e})).then(function(e){return e.request.function_id=C(e.request.function_id),Promise.resolve(t.perform(r3.call,e)).then(function(e){return e.map(function(e){return t.formatter.moveValue(e)})})})})}catch(e){return Promise.reject(e)}},t.callV2=function(e,r){try{var t=this;return Promise.resolve(t.getNetwork()).then(function(){return Promise.resolve((0,b.mE)({request:e})).then(function(e){return e.request.function_id=C(e.request.function_id),Promise.resolve(t.perform(r3.callV2,e)).then(function(e){return e.map(function(e){return e})})})})}catch(e){return Promise.reject(e)}},t.dryRun=function(e){try{var r=this;return Promise.resolve(r.getNetwork()).then(function(){return Promise.resolve((0,b.mE)({transaction:e})).then(function(e){return Promise.resolve(r.perform(r3.dryRun,e)).then(function(e){return r.formatter.transactionOutput(e)})})})}catch(e){return Promise.reject(e)}},t.dryRunRaw=function(e,r){try{var t=this;return Promise.resolve(t.getNetwork()).then(function(){return Promise.resolve(t.perform(r3.dryRunRaw,{rawUserTransactionHex:e,publicKeyHex:r})).then(function(e){return t.formatter.transactionOutput(e)})})}catch(e){return Promise.reject(e)}},t._getBlock=function(e,r){try{var t=this;return Promise.resolve(t.getNetwork()).then(function(){return Promise.resolve(e).then(function(n){function i(){return(0,k.$l)(function(){try{return Promise.resolve(t.perform(r3.getBlock,s)).then(function(e){function n(r){return i?r:t.formatter.blockWithTxnHashes(e)}if(null==e)return null!=s.blockHash&&null==t._emitted["b:"+s.blockHash]||null!=s.blockNumber&&a>t._emitted.block?null:void 0;var i,o=function(){if(r)return Promise.resolve(t._getInternalBlockNumber(100+2*t.pollingInterval)).then(function(r){var n=r-e.header.number+1;return n<=0&&(n=1),e.confirmations=n,i=1,t.formatter.blockWithTransactions(e)})}();return o&&o.then?o.then(n):n(o)})}catch(e){return Promise.reject(e)}},{oncePoll:t})}e=n;var a=-128,s={includeTransactions:!!r},u=function(){if((0,o.A7)(e,32))s.blockHash=e;else{var r=rQ(function(){return Promise.resolve(t._getBlockTag(e)).then(function(e){s.blockNumber=e,a=s.blockNumber})},function(){rZ.throwArgumentError("invalid block hash or block number","blockHashOrBlockNumber",e)});if(r&&r.then)return r.then(function(){})}}();return u&&u.then?u.then(i):i(u)})})}catch(e){return Promise.reject(e)}},t.getBlock=function(e){return this._getBlock(e,!0)},t.getTransaction=function(e){try{var r=this;return Promise.resolve(r.getNetwork()).then(function(){return Promise.resolve(e).then(function(t){e=t;var n={transactionHash:r.formatter.hash(e,!0)};return(0,k.$l)(function(){try{return Promise.resolve(r.perform(r3.getTransactionByHash,n)).then(function(t){function n(){return r._wrapTransaction(i)}if(null==t)return null==r._emitted["t:"+e]?null:void 0;var i=r.formatter.transactionResponse(t),o=function(){if(void 0===i.block_number)i.confirmations=0;else{var e=function(){if(void 0===i.confirmations)return Promise.resolve(r._getInternalBlockNumber(100+2*r.pollingInterval)).then(function(e){var r=e-i.block_number+1;r<=0&&(r=1),i.confirmations=r})}();if(e&&e.then)return e.then(function(){})}}();return o&&o.then?o.then(n):n(o)})}catch(e){return Promise.reject(e)}},{oncePoll:r})})})}catch(e){return Promise.reject(e)}},t.getTransactionInfo=function(e){try{var r=this;return Promise.resolve(r.getNetwork()).then(function(){return Promise.resolve(e).then(function(t){e=t;var n={transactionHash:r.formatter.hash(e,!0)};return(0,k.$l)(function(){try{return Promise.resolve(r.perform(r3.getTransactionInfo,n)).then(function(t){if(null===t)return null===r._emitted["t:"+e]?null:void 0;if(null!==t.block_hash){var n=r.formatter.transactionInfo(t),i=function(){if(null===n.block_number)n.confirmations=0;else{var e=function(){if(!n.confirmations)return Promise.resolve(r._getInternalBlockNumber(100+2*r.pollingInterval)).then(function(e){var r=e-n.block_number+1;r<=0&&(r=1),n.confirmations=r})}();if(e&&e.then)return e.then(function(){})}}();return i&&i.then?i.then(function(){return n}):n}})}catch(e){return Promise.reject(e)}},{oncePoll:r})})})}catch(e){return Promise.reject(e)}},t.getEventsOfTransaction=function(e){try{var r=this;return Promise.resolve(r.getNetwork()).then(function(){return Promise.resolve(e).then(function(t){e=t;var n={transactionHash:r.formatter.hash(e,!0)};return Promise.resolve(r.perform(r3.getEventsOfTransaction,n)).then(function(e){return rX.arrayOf(r.formatter.transactionEvent.bind(r.formatter))(e)})})})}catch(e){return Promise.reject(e)}},t.getTransactionEvents=function(e){try{var r=this;return Promise.resolve(r.getNetwork()).then(function(){return Promise.resolve((0,b.mE)({filter:e})).then(function(e){return Promise.resolve(r.perform(r3.getEvents,e)).then(function(e){return rX.arrayOf(r.formatter.transactionEvent.bind(r.formatter))(e)})})})}catch(e){return Promise.reject(e)}},t._getBlockTag=function(e){try{var r=this;return Promise.resolve(e).then(function(t){return(e=t)<0?(e%1&&rZ.throwArgumentError("invalid BlockTag","blockTag",e),Promise.resolve(r._getInternalBlockNumber(100+2*r.pollingInterval)).then(function(r){return(r+=e)<0&&(r=0),r})):e})}catch(e){return Promise.reject(e)}},t._startEvent=function(e){this.polling=this._events.filter(function(e){return e.pollable()}).length>0},t._stopEvent=function(e){this.polling=this._events.filter(function(e){return e.pollable()}).length>0},t._addEventListener=function(e,r,t){var n=new r4(r1(e),r,t);return this._events.push(n),this._startEvent(n),this},t.on=function(e,r){return this._addEventListener(e,r,!1)},t.once=function(e,r){return this._addEventListener(e,r,!0)},t.emit=function(e){var r=arguments,t=this,n=!1,i=[],o=r1(e);return this._events=this._events.filter(function(e){return e.tag!==o||(setTimeout(function(){e.listener.apply(t,[].slice.call(r,1))},0),n=!0,!e.once||(i.push(e),!1))}),i.forEach(function(e){t._stopEvent(e)}),n},t.listenerCount=function(e){if(!e)return this._events.length;var r=r1(e);return this._events.filter(function(e){return e.tag===r}).length},t.listeners=function(e){if(null==e)return this._events.map(function(e){return e.listener});var r=r1(e);return this._events.filter(function(e){return e.tag===r}).map(function(e){return e.listener})},t.off=function(e,r){var t=this;if(null===r)return this.removeAllListeners(e);var n=[],i=!1,o=r1(e);return this._events=this._events.filter(function(e){return e.tag!==o||e.listener!==r||!!i||(i=!0,n.push(e),!1)}),n.forEach(function(e){t._stopEvent(e)}),this},t.removeAllListeners=function(e){var r=this,t=[];if(null===e)t=this._events,this._events=[];else{var n=r1(e);this._events=this._events.filter(function(e){return e.tag!==n||(t.push(e),!1)})}return t.forEach(function(e){r._stopEvent(e)}),this},x(r,[{key:"ready",get:function(){var e=this;return(0,k.$l)(function(){return e._ready().then(function(e){return e},function(e){if(e.code!==y.Yd.errors.NETWORK_ERROR||"noNetwork"!==e.event)throw e})})}},{key:"network",get:function(){return this._network}},{key:"blockNumber",get:function(){return this._getInternalBlockNumber(100+this.pollingInterval/2),null!=this._fastBlockNumber?this._fastBlockNumber:-1}},{key:"polling",get:function(){return null!=this._poller},set:function(e){var r=this;e&&!this._poller?(this._poller=setInterval(this.poll.bind(this),this.pollingInterval),this._bootstrapPoll||(this._bootstrapPoll=setTimeout(function(){r.poll(),r._bootstrapPoll=setTimeout(function(){r._poller||r.poll(),r._bootstrapPoll=null},r.pollingInterval)},0))):!e&&this._poller&&(clearInterval(this._poller),this._poller=null)}},{key:"pollingInterval",get:function(){return this._pollingInterval},set:function(e){var r=this;if("number"!=typeof e||e<=0||parseInt(String(e))!=e)throw Error("invalid polling interval");this._pollingInterval=e,this._poller&&(clearInterval(this._poller),this._poller=setInterval(function(){r.poll()},this._pollingInterval))}}]),r}(rq),r7=new y.Yd(rV),te=new Set(["sender","sender_public_key","sequence_number","script","modules","max_gas_amount","gas_unit_price","gas_token_code","chain_id"]),tr=new Set([y.Yd.errors.INSUFFICIENT_FUNDS,y.Yd.errors.NONCE_EXPIRED,y.Yd.errors.REPLACEMENT_UNDERPRICED]),tt=function(){function e(){r7.checkAbstract(this instanceof e?this.constructor:void 0,e),(0,b.zG)(this,"_isSigner",!0)}var r=e.prototype;return r.getBalance=function(e,r){try{return this.checkProvider("getBalance"),Promise.resolve(this.provider.getBalance(this.getAddress(),e,r))}catch(e){return Promise.reject(e)}},r.getSequenceNumber=function(e){try{return this.checkProvider("getSequenceNumber"),Promise.resolve(this.provider.getSequenceNumber(this.getAddress(),e))}catch(e){return Promise.reject(e)}},r.estimateGas=function(e){try{var r=this;return r.checkProvider("estimateGas"),Promise.resolve((0,b.mE)(r.checkTransaction(e))).then(function(e){return Promise.resolve(r.provider.dryRun(e)).then(function(e){return"number"==typeof e.gas_used?3*e.gas_used:BigInt(3)*e.gas_used.valueOf()})})}catch(e){return Promise.reject(e)}},r.sendTransaction=function(e){var r=this;return this.checkProvider("sendTransaction"),this.populateTransaction(e).then(function(e){return r.signTransaction(e).then(function(e){return r.provider.sendTransaction(e)})})},r.getChainId=function(){try{return this.checkProvider("getChainId"),Promise.resolve(this.provider.getNetwork()).then(function(e){return e.chainId})}catch(e){return Promise.reject(e)}},r.getGasPrice=function(){try{return this.checkProvider("getGasPrice"),Promise.resolve(this.provider.getGasPrice())}catch(e){return Promise.reject(e)}},r.checkTransaction=function(e){for(var r=0,t=Object.keys(e);r<t.length;r++){var n=t[r];te.has(n)||r7.throwArgumentError("invalid transaction key: "+n,"transaction",e)}var i=(0,b.DC)(e);return void 0===i.sender?i.sender=this.getAddress():i.sender=Promise.all([Promise.resolve(i.sender),this.getAddress()]).then(function(r){return r[0]!==r[1]&&r7.throwArgumentError("from address mismatch","transaction",e),r[0]}),i},r.populateTransaction=function(e){try{var r=this;return Promise.resolve((0,b.mE)(r.checkTransaction(e))).then(function(t){return void 0===t.gas_unit_price&&(t.gas_unit_price=r.getGasPrice()),void 0===t.sequence_number&&(t.sequence_number=r.getSequenceNumber("pending")),void 0===t.chain_id?t.chain_id=r.getChainId():t.chain_id=Promise.all([Promise.resolve(t.chain_id),r.getChainId()]).then(function(r){return 0!==r[1]&&r[0]!==r[1]&&r7.throwArgumentError("chainId address mismatch","transaction",e),r[0]}),void 0===t.max_gas_amount&&(t.max_gas_amount=r.estimateGas(t).catch(function(e){if(tr.has(e.code))throw e;return console.log("err: "+e),r7.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",y.Yd.errors.UNPREDICTABLE_GAS_LIMIT,{error:e,tx:t})})),(0,b.mE)(t)})}catch(e){return Promise.reject(e)}},r.checkProvider=function(e){this.provider||r7.throwError("missing provider",y.Yd.errors.UNSUPPORTED_OPERATION,{operation:e||"_checkProvider"})},e.isSigner=function(e){return!!(e&&e._isSigner)},e}();function tn(e,r){try{var t=e()}catch(e){return r(e)}return t&&t.then?t.then(void 0,r):t}var ti=new y.Yd(rV),to=new Set(["call","estimateGas"]);function ta(e,r,t){var n=r.message;r.code===y.Yd.errors.SERVER_ERROR&&r.error&&"string"==typeof r.error.message?n=r.error.message:"string"==typeof r.body?n=r.body:"string"==typeof r.responseText&&(n=r.responseText),n=(n||"").toLowerCase();var i=t.transaction||t.signedTransaction;throw n.match(/insufficient funds/)&&ti.throwError("insufficient funds for intrinsic transaction cost",y.Yd.errors.INSUFFICIENT_FUNDS,{error:r,method:e,transaction:i}),n.match(/nonce too low/)&&ti.throwError("nonce has already been used",y.Yd.errors.NONCE_EXPIRED,{error:r,method:e,transaction:i}),n.match(/replacement transaction underpriced/)&&ti.throwError("replacement fee too low",y.Yd.errors.REPLACEMENT_UNDERPRICED,{error:r,method:e,transaction:i}),to.has(e)&&n.match(/gas required exceeds allowance|always failing transaction|execution reverted/)&&ti.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",y.Yd.errors.UNPREDICTABLE_GAS_LIMIT,{error:r,method:e,transaction:i}),r}function ts(e){if(e.error){var r=Error(e.error.message);throw r.code=e.error.code,r.data=e.error.data,r}return e.result}var tu={},tc=function(e){function r(t,n,i){var o;if(ti.checkNew(this instanceof r?this.constructor:void 0,r),o=e.call(this)||this,t!==tu)throw Error("do not call the JsonRpcSigner constructor directly; use provider.getSigner");return(0,b.zG)(A(o),"provider",n),void 0===i&&(i=0),"string"==typeof i?(0,b.zG)(A(o),"_address",o.provider.formatter.address(i)):"number"==typeof i?(0,b.zG)(A(o),"_index",i):ti.throwArgumentError("invalid address or index","addressOrIndex",i),o}U(r,e);var t=r.prototype;return t.connect=function(e){return ti.throwError("cannot alter JSON-RPC Signer connection",y.Yd.errors.UNSUPPORTED_OPERATION,{operation:"connect"})},t.getAddress=function(){try{var e=this;if(e._address)return Promise.resolve(e._address);return Promise.resolve(e.provider.send("stc_accounts",[]).then(function(r){return r.length<=e._index&&ti.throwError("unknown account #"+e._index,y.Yd.errors.UNSUPPORTED_OPERATION,{operation:"getAddress"}),e.provider.formatter.address(r[e._index])}))}catch(e){return Promise.reject(e)}},t.sendUncheckedTransaction=function(e){var r=this;ti.debug("sendUncheckedTransaction",e),e=(0,b.DC)(e);var t=this.getAddress().then(function(e){return e&&(e=e.toLowerCase()),e});return ti.debug(t),(0,b.mE)({tx:(0,b.mE)(e),sender:t}).then(function(t){var n=t.tx,i=t.sender;null!=n.from?n.from.toLowerCase()!==i&&ti.throwArgumentError("from address mismatch","transaction",e):n.from=i;var o=r.provider.constructor.hexlifyTransaction(n,{from:!0,expiredSecs:!0,addGasBufferMultiplier:!0});return n.addGasBufferMultiplier&&"number"==typeof n.addGasBufferMultiplier&&(o.addGasBufferMultiplier=n.addGasBufferMultiplier.toString()),ti.debug(o),r.provider.send("stc_sendTransaction",[o]).then(function(e){return e},function(e){throw e.responseText&&(e.responseText.indexOf("insufficient funds")>=0&&ti.throwError("insufficient funds",y.Yd.errors.INSUFFICIENT_FUNDS,{transaction:n}),e.responseText.indexOf("nonce too low")>=0&&ti.throwError("nonce has already been used",y.Yd.errors.NONCE_EXPIRED,{transaction:n}),e.responseText.indexOf("replacement transaction underpriced")>=0&&ti.throwError("replacement fee too low",y.Yd.errors.REPLACEMENT_UNDERPRICED,{transaction:n})),e})})},t.signTransaction=function(e){try{var r=this;return Promise.resolve((0,b.mE)(e)).then(function(t){return Promise.resolve(r.getAddress()).then(function(n){return void 0!==t.sender?t.sender!==n&&ti.throwArgumentError("from address mismatch","transaction",e):t.sender=n,r.provider.send("account.sign_txn_request",[t]).then(function(e){return e},function(e){return ta("signTransaction",e,t)})})})}catch(e){return Promise.reject(e)}},t.signMessage=function(e){try{var r=this.provider;return Promise.resolve(this.getAddress()).then(function(t){if("string"==typeof e)n=new Uint8Array(I.from(e));else{if(!(0,o._t)(e))return ti.throwError("type of message input is unsupported",y.Yd.errors.UNSUPPORTED_OPERATION,{operation:"signMessage"});n=e}var n,i=Array.from(n);return r.send("account.sign",[t.toLowerCase(),{message:i}])})}catch(e){return Promise.reject(e)}},t.unlock=function(e){try{var r=this.provider;return Promise.resolve(this.getAddress()).then(function(t){return r.send("account.unlock",[t.toLowerCase(),e,void 0])})}catch(e){return Promise.reject(e)}},r}(tt),tl={chainId:!0,data:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,value:!0},tf=function(e){function r(t,n){ti.checkNew(this instanceof r?this.constructor:void 0,r);var i,o=n;return null==o&&(o=new Promise(function(e,r){setTimeout(function(){i.detectNetwork().then(function(r){e(r)},function(e){r(e)})},0)})),i=e.call(this,o)||this,t||(t=(0,b.tu)(i.constructor,"defaultUrl")()),"string"==typeof t?(0,b.zG)(A(i),"connection",Object.freeze({url:t})):(0,b.zG)(A(i),"connection",Object.freeze((0,b.DC)(t))),i._nextId=42,i}U(r,e),r.defaultUrl=function(){return"http://localhost:9850"};var t=r.prototype;return t.detectNetwork=function(){try{var e=this;return Promise.resolve(new Promise(function(e){setTimeout(e,0)})).then(function(){function r(){if(null!=t)try{return rW(w.O$.from(t).toNumber())}catch(e){return ti.throwError("could not detect network",y.Yd.errors.NETWORK_ERROR,{chainId:t,event:"invalidNetwork",serverError:e})}return ti.throwError("could not detect network",y.Yd.errors.NETWORK_ERROR,{event:"noNetwork"})}var t=null,n=tn(function(){return Promise.resolve(e.send("chain.id",[])).then(function(e){t=e.id})},function(){var r=tn(function(){return Promise.resolve(e.perform(r3.getChainInfo,null)).then(function(e){t=e.chain_id})},function(){});return r&&r.then?r.then(function(){}):void 0});return n&&n.then?n.then(r):r(n)})}catch(e){return Promise.reject(e)}},t.getSigner=function(e){return new tc(tu,this,e)},t.getNowSeconds=function(){try{return Promise.resolve(this.perform(r3.getNodeInfo,null)).then(function(e){return e.now_seconds})}catch(e){return Promise.reject(e)}},t.send=function(e,r){var t=this,n={method:e,params:r,id:this._nextId++,jsonrpc:"2.0"};return this.emit("debug",{action:"request",request:(0,b.p$)(n),provider:this}),(0,k.rd)(this.connection,JSON.stringify(n),ts).then(function(e){return t.emit("debug",{action:"response",request:n,response:e,provider:t}),e},function(e){throw t.emit("debug",{action:"response",error:e,request:n,provider:t}),e})},t.prepareRequest=function(e,r){switch(e){case r3.getChainInfo:return["chain.info",[]];case r3.getNodeInfo:return["node.info",[]];case r3.getGasPrice:return["txpool.gas_price",[]];case r3.dryRun:return["contract.dry_run",[r.transaction]];case r3.dryRunRaw:return["contract.dry_run_raw",[r.rawUserTransactionHex,r.publicKeyHex]];case r3.sendTransaction:return["txpool.submit_hex_transaction",[r.signedTransaction]];case r3.getBlock:if(void 0!==r.blockNumber)return["chain.get_block_by_number",[r.blockNumber]];if(void 0!==r.blockHash)return["chain.get_block_by_hash",[r.blockHash]];break;case r3.getTransactionByHash:return["chain.get_transaction",[r.transactionHash]];case r3.getTransactionInfo:return["chain.get_transaction_info",[r.transactionHash]];case r3.getEventsOfTransaction:return["chain.get_events_by_txn_hash",[r.transactionHash]];case r3.getCode:return["contract.get_code",[r.moduleId]];case r3.getResource:return["contract.get_resource",[r.address,r.structTag]];case r3.getAccountState:return["state.get_account_state_set",[r.address]];case r3.call:return["contract.call",[r.request]];case r3.callV2:return["contract.call_v2",[r.request]];case r3.getEvents:return["chain.get_events",[r.filter]]}},t.perform=function(e,r){try{var t=this,n=t.prepareRequest(e,r);return void 0===n&&ti.throwError(e+" not implemented",y.Yd.errors.NOT_IMPLEMENTED,{operation:e}),Promise.resolve(tn(function(){return Promise.resolve(t.send(n[0],n[1]))},function(t){return ta(e,t,r)}))}catch(e){return Promise.reject(e)}},t._startEvent=function(r){"pending"===r.tag&&ti.throwError("pending event not implemented",y.Yd.errors.NOT_IMPLEMENTED,{operation:"pending event"}),e.prototype._startEvent.call(this,r)},t._stopEvent=function(r){r.tag===r8.pending&&0===this.listenerCount(r8.pending)&&(this._pendingFilter=null),e.prototype._stopEvent.call(this,r)},r.hexlifyTransaction=function(e,r){var t=(0,b.DC)(tl);if(r)for(var n in r)r[n]&&(t[n]=!0);rC(e,t);var i={};return["gasLimit","gasPrice","nonce","value","expiredSecs"].forEach(function(r){if(null!=e[r]){var t=(0,o.$P)(e[r]);"gasLimit"===r&&(r="gas"),i[r]=t}}),["from","to","data"].forEach(function(r){null!=e[r]&&(i[r]=(0,o.Dv)(e[r]))}),i},r}(r9),th=function(e,r){try{return Promise.resolve(tv(r,e)).then(function(t){return Promise.resolve(td(e,t,r))})}catch(e){return Promise.reject(e)}},td=function(e,r,t){try{return Promise.resolve((0,s.$3)((0,a.stripHexPrefix)(e))).then(function(e){var n=t_(e,r,t);return Promise.resolve(n)})}catch(e){return Promise.reject(e)}},tv=function(e,r){try{var t,n,i=new ru("RawUserTransaction").get_salt(),u=(t=new L,e.serialize(t),t.getBytes()),c=((n=new Uint8Array(i.length+u.length)).set(i,0),n.set(u,i.length),n);return Promise.resolve((0,s.Xx)(c,(0,a.stripHexPrefix)(r))).then(function(e){return(0,o.Dv)(e)})}catch(e){return Promise.reject(e)}};function tp(e,r,t){var n=function(e){if("string"!=typeof e)return e;var r=e.split("::",3);if(3!==r.length)throw Error("cannot parse "+e+" into FunctionId");return{address:r[0],module:r[1],functionName:r[2]}}(e);return new eN(new e_(rm(n.address),new ep(n.module)),new ep(n.functionName),r.map(function(e){return r_(e)}),t)}function tm(e,r,t){var n=tp(e,r,t);return new eJ(n)}function tg(e,r,t){var n=r.map(function(e){return new eg((0,o.lE)(e))}),i=null;return t&&(i=tp(t.functionId,t.tyArgs,t.args)),new ek(rm(e),n,i)}function t_(e,r,t){var n=new ef((0,o.lE)((0,a.addHexPrefix)(e))),i=new eh((0,o.lE)((0,a.addHexPrefix)(r))),s=new eM(n,i);return new eB(t,s)}function ty(e){return e.map(function(e){return function e(r){var t=r.split("<"),n=t[0].split("::"),i=n[0],o=n[1],a=n[2],s=t[1]?t[1].replace(">","").split(","):[],u=[];return s.length>0&&s.forEach(function(r){u.push(e(r.trim()))}),{Struct:{address:i,module:o,name:a,type_params:u}}}(e)})}function tz(e,r){return r.map(function(r,t){return function(e,r){if("Address"===r)return(0,o.lE)(e);var t=new L;if(r&&"U8"===r.Vector){for(var n=e?(0,o.A7)((0,a.addHexPrefix)(e))?rl(e):new Uint8Array(I.from(e)):new Uint8Array,i=n.length,s=[],u=0;u<i;u++)s.push(n[u]);rr.serializeVectorU8(s,t);var c=(0,o.Dv)(t.getBytes());return(0,o.lE)(c)}if(r&&r.Vector&&Array.isArray(e)){t.serializeLen(e.length),e.forEach(function(e){"U8"===r.Vector.Vector?t.serializeBytes(rl(e)):"Address"===r.Vector?rm(e).serialize(t):r.Vector&&t["serialize"+r.Vector](e)});var l=(0,o.Dv)(t.getBytes());return(0,o.lE)(l)}if(r){t["serialize"+r](e);var f=(0,o.Dv)(t.getBytes());return(0,o.lE)(f)}return e}(r,e[t].type_tag)})}var tw=function(e,r){try{return Promise.resolve(Promise.all(Object.keys(e.private_keys).map(function(t){var n=(0,o.Dv)(e.private_keys[t].value);return tv(r,n).then(function(e){var r=new eh((0,o.lE)(e)),n=Number.parseInt(t,10);return[r,n]}).catch(function(e){throw Error("invalid private key: "+e)})}))).then(function(e){var r=ez.build(e);return Promise.resolve(r)})}catch(e){return Promise.reject(e)}},tb={__proto__:null,abi:{__proto__:null,decodeTransactionScriptABI:function(e){var r=new D(e),t=e$.deserialize(r);return{args:t.args.map(function(e){return{name:e.name,type_tag:rw(e.type_tag)}}),code:t.code,doc:t.doc,name:t.name,ty_args:t.ty_args.map(function(e){return{name:e.name}})}}},account:{__proto__:null,showAccount:rI,generateAccount:function(){try{var e=rT(),r=rI(e);return Promise.resolve(r)}catch(e){return Promise.reject(e)}},generatePrivateKey:rT,getMultiEd25519AccountPrivateKey:rx,getMultiEd25519AccountPublicKey:rN,getMultiEd25519AccountAddress:rU,getMultiEd25519AccountReceiptIdentifier:rB,showMultiEd25519Account:function(e){var r=rx(e),t=rN(e),n=rU(e),i=rB(e),o=rb(t,O.MULTI);return{privateKey:r,publicKey:t,address:n,authKey:o,receiptIdentifier:i}},decodeMultiEd25519AccountPrivateKey:function(e){for(var r,t=(0,o.lE)(e),n=t.slice(0,1)[0],i=t.slice(1,2)[0],a=t.slice(2,3)[0],s=[],u=[],c=3,l=0;l<n;l+=1){r=c+32;var f=t.slice(c,r);s.push((0,o.Dv)(f)),c=r}for(var h=0;h<a;h+=1){r=c+32;var d=t.slice(c,r);u.push((0,o.Dv)(d)),c=r}return{privateKeys:u,publicKeys:s,threshold:i}}},errors:{__proto__:null,InvalidNumberOfMoveArgs:function(e,r){return Error("Invalid number of arguments to Move function. given: "+e+", expected: "+r)},InvalidNumberOfRPCParams:function(e,r,t){return Error('Invalid number of input parameters to RPC method "'+e+'" given: '+r+", expected: "+t)},InvalidConnection:function(e){return Error("CONNECTION ERROR: Couldn't connect to node "+e+".")},InvalidProvider:function(){return Error("Provider not set or invalid")},InvalidResponse:function(e){return Error(e&&e.error&&e.error.message?e.error.message:"Invalid JSON RPC response: "+JSON.stringify(e))},ConnectionTimeout:function(e){return Error("CONNECTION TIMEOUT: timeout of "+e+" ms achived")}},helper:{__proto__:null,dec2bin:H,bin2dec:M,dec2uint8array:W,uint8array2dec:K,setBit:q,isSetBit:Y},hex:{__proto__:null,toHexString:rc,fromHexString:rl,padLeft:rf,padRight:function(e,r,t){return e+Array(r-e.length+1).join(t||"0")}},parser:{__proto__:null,parseTypeTags:function(e){return rS(e,function(e){return e.parse_comma_list(function(e){return e.parseTypeTag()},"EOF",!0)})},parseTypeTag:rO},properties:{__proto__:null,checkProperties:rC},signedMessage:{__proto__:null,recoverSignedMessageAddress:function(e){try{var r,t,n=function(e){return r?e:Promise.resolve(t)},i=rF(e),a=function(){if(i.authenticator instanceof eM){var e=i.authenticator.signature.value,r=rL(i.message),n=i.authenticator.public_key.value;return t=rk((0,o.Dv)(n)),Promise.resolve((0,s.T)(e,r,n)).then(function(e){var r;if(!e)throw Error("Failed verify signature and message");if(r=i.account,rk((0,o.Dv)(n))!==rg(r))throw Error("Failed: address are not match")})}}();return Promise.resolve(a&&a.then?a.then(n):n(a))}catch(e){return Promise.reject(e)}},encodeSignedMessage:function(e,r,t){try{var n=new Uint8Array(I.from(e,"utf8")),i=new ri(n);return Promise.resolve(rD(e,(0,o.Dv)(r))).then(function(e){var r=e.publicKey,n=e.signature;return Promise.resolve(rj(i,t,r,n)).then(Promise.resolve)})}catch(e){return Promise.reject(e)}},generateSignedMessage:rj,signMessage:rD,encodeTransactionAuthenticatorEd25519:rG,getEd25519SignMsgBytes:rL,decodeSignedMessage:rF},multiSign:{__proto__:null,generateMultiEd25519SignatureShard:function(e,r){try{return Promise.resolve(tw(e,r)).then(function(r){var t=new ew(r,e.threshold);return Promise.resolve(t)})}catch(e){return Promise.reject(e)}},generateMultiEd25519Signature:tw,generateMultiEd25519KeyShard:function(e,r,t){try{if(0===r.length)throw Error("require at least one private key");var n=(0,z.cloneDeep)(e),i={};return Promise.resolve(Promise.all(r.map(function(e){return rh(e).then(function(r){return n.push(r),i[r]=e,r}).catch(function(e){throw Error("invalid private key: "+e)})}))).then(function(){n.sort(function(e,r){return e>r?1:-1});var e=n.filter(function(e,r,t){return t.indexOf(e)===r}),i={};return Promise.resolve(Promise.all(r.map(function(r){return rh(r).then(function(t){var n=e.indexOf(t);return n>-1&&(i[n]=new el((0,o.lE)(r))),t}).catch(function(e){throw Error("invalid private key: "+e)})}))).then(function(){var r=e.map(function(e){return new ef((0,o.lE)(e))}),n=new eb(r,t,i);return Promise.resolve(n)})})}catch(e){return Promise.reject(e)}}},tx:{__proto__:null,encodeScriptFunctionByResolve:function(e,r,t,n){try{var i=ty(r),o=new tf(n);return Promise.resolve(o.send("contract.resolve_function",[e])).then(function(r){var n=r.args;n[0]&&"Signer"===n[0].type_tag&&n.shift();var o=tz(n,t);return tm(e,i,o)})}catch(e){return Promise.reject(e)}},signRawUserTransaction:function(e,r){try{return Promise.resolve(th(e,r)).then(function(e){var r;return r=new L,e.serialize(r),(0,o.Dv)(r.getBytes())})}catch(e){return Promise.reject(e)}},getSignedUserTransaction:th,getSignatureHex:tv,encodeTransactionScript:function(e,r,t){var n=new eP(e,r.map(function(e){return r_(e)}),t.map(function(e){return(0,o.lE)(e)}));return new eq(n)},encodeStarcoinTypesScriptFunction:tp,encodeScriptFunction:tm,encodeStarcoinTypesPackage:tg,encodePackage:function(e,r,t){var n=tg(e,r,t);return new eY(n)},generateRawUserTransaction:function(e,r,t,n,i,o,a){var s=rm(e),u=BigInt(i),c=BigInt(t),l=BigInt(n),f=BigInt(o),h=new er(a);return new eE(s,u,r,c,l,"0x1::STC::STC",f,h)},signTxn:t_,encodeStructTypeTags:ty,encodeScriptFunctionArgs:tz}},tk=new y.Yd(rV),tE=1;function tP(e,r){return function(e,t){var n={method:e,params:t,id:tE+=1,jsonrpc:"2.0"};return new Promise(function(e,t){r(n,function(r,n){if(r)return t(r);if(n.error){var i=Error(n.error.message);return i.code=n.error.code,i.data=n.error.data,t(i)}e(n.result)})})}}var tI=function(e){function r(t,n){var i,o,a,s;return tk.checkNew(this instanceof r?this.constructor:void 0,r),void 0===t&&tk.throwArgumentError("missing provider","provider",t),"function"==typeof t?(o="unknown:",a=t):((o=t.host||t.path||"")||!t.isStarMask||(o="starmask"),s=t,t.sendAsync?a=tP(t,t.sendAsync.bind(t)):t.send?a=tP(t,t.send.bind(t)):tk.throwArgumentError("unsupported provider","provider",t),o||(o="unknown:")),i=e.call(this,o,n)||this,(0,b.zG)(A(i),"jsonRpcFetchFunc",a),(0,b.zG)(A(i),"provider",s),i}return U(r,e),r.prototype.send=function(e,r){return this.jsonRpcFetchFunc(e,r)},r}(tf),tT=new y.Yd(rV),tx=1,tN=function(e){function r(r,t){"any"===t&&tT.throwError("WebSocketProvider does not support 'any' network yet",y.Yd.errors.UNSUPPORTED_OPERATION,{operation:"network:any"}),(n=e.call(this,r,t)||this)._pollingInterval=-1,n._wsReady=!1,(0,b.zG)(A(n),"_websocket",new(P())(n.connection.url)),(0,b.zG)(A(n),"_requests",{}),(0,b.zG)(A(n),"_subs",{}),(0,b.zG)(A(n),"_subIds",{}),(0,b.zG)(A(n),"_detectNetwork",e.prototype.detectNetwork.call(A(n))),n._websocket.onopen=function(){n._wsReady=!0,Object.keys(n._requests).forEach(function(e){n._websocket.send(n._requests[e].payload)})},n._websocket.onmessage=function(e){var r=e.data,t=JSON.parse(r);if(null!=t.id){var i,o=String(t.id),a=n._requests[o];delete n._requests[o],void 0!==t.result?(a.callback(null,t.result),n.emit("debug",{action:"response",request:JSON.parse(a.payload),response:t.result,provider:A(n)})):(t.error?(i=Error(t.error.message||"unknown error"),(0,b.zG)(i,"code",t.error.code||null),(0,b.zG)(i,"response",r)):i=Error("unknown error"),a.callback(i,void 0),n.emit("debug",{action:"response",error:i,request:JSON.parse(a.payload),provider:A(n)}))}else if("starcoin_subscription"===t.method){var s=n._subs[t.params.subscription];s&&s.processFunc(t.params.result)}else console.warn("this should not happen")};var n,i=setInterval(function(){n.emit("poll")},1e3);return i.unref&&i.unref(),n}U(r,e);var t=r.prototype;return t.detectNetwork=function(){return this._detectNetwork},t.poll=function(){return Promise.resolve(null)},t.send=function(e,r){var t=this,n=tx++;return new Promise(function(i,o){var a=JSON.stringify({method:e,params:r,id:n,jsonrpc:"2.0"});t.emit("debug",{action:"request",request:JSON.parse(a),provider:t}),t._requests[String(n)]={callback:function(e,r){return e?o(e):i(r)},payload:a},t._wsReady&&t._websocket.send(a)})},r.defaultUrl=function(){return"ws://localhost:9870"},t._subscribe=function(e,r,t){try{var n=this,i=n._subIds[e];return null==i&&(i=Promise.all(r).then(function(e){return n.send("starcoin_subscribe",e)}),n._subIds[e]=i),Promise.resolve(i).then(function(r){n._subs[r]={tag:e,processFunc:t}})}catch(e){return Promise.reject(e)}},t._startEvent=function(e){var r=this;switch(e.type){case r8.block:this._subscribe(r8.block,[{type_name:"newHeads"}],function(e){var t=r.formatter.u64(e.header.number);r._emitted.block=t,r.emit(r8.block,t)});break;case r8.pending:this._subscribe(r8.pending,[{type_name:"newPendingTransactions"}],function(e){r.emit(r8.pending,e)});break;case r8.filter:this._subscribe(e.tag,[{type_name:"events"},e.filter],function(t){r.emit(e.filter,r.formatter.transactionEvent(t))});break;case r8.tx:var t=function(e){var t=e.hash;r.getTransactionInfo(t).then(function(e){e&&r.emit(t,e)})};t(e),this._subscribe(r8.tx,[{type_name:"newHeads"}],function(e){r._events.filter(function(e){return e.type===r8.tx}).forEach(t)});break;case"debug":case"poll":case"willPoll":case"didPoll":case"error":break;default:console.log("unhandled:",e)}},t._stopEvent=function(e){var r=this,t=e.tag;if(e.type===r8.tx){if(this._events.filter(function(e){return e.type===r8.tx}).length)return;t=r8.tx}else if(this.listenerCount(e.event))return;var n=this._subIds[t];n&&(delete this._subIds[t],n.then(function(e){r._subs[e]&&(delete r._subs[e],r.send("starcoin_unsubscribe",[e]))}))},t.destroy=function(){try{var e=this,r=function(){e._websocket.close(1e3)},t=function(){if(e._websocket.readyState===P().CONNECTING)return Promise.resolve(new Promise(function(r){e._websocket.onopen=function(){r(!0)},e._websocket.onerror=function(){r(!1)}})).then(function(){})}();return Promise.resolve(t&&t.then?t.then(r):r(t))}catch(e){return Promise.reject(e)}},x(r,[{key:"pollingInterval",get:function(){return 0},set:function(e){tT.throwError("cannot set polling interval on WebSocketProvider",y.Yd.errors.UNSUPPORTED_OPERATION,{operation:"setPollingInterval"})}},{key:"polling",set:function(e){e&&tT.throwError("cannot set polling on WebSocketProvider",y.Yd.errors.UNSUPPORTED_OPERATION,{operation:"setPolling"})}}]),r}(tf),tU={__proto__:null,CONSTANTS:r8,Event:r4,RPC_ACTION:r3,BaseProvider:r9,formatMoveStruct:rJ,formatMoveValue:r$,Formatter:rX,JsonRpcSigner:tc,JsonRpcProvider:tf,Web3Provider:tI,WebsocketProvider:tN},tB=function(){function e(e){this.token_code=e}return e.prototype.serialize=function(e){this.token_code.serialize(e)},e.deserialize=function(r){var t=tD.deserialize(r);return new e(t)},e}(),tA=function(){function e(e){this.value=e}return e.prototype.serialize=function(e){tF.serializeArray16U8Array(this.value,e)},e.deserialize=function(r){var t=tF.deserializeArray16U8Array(r);return new e(t)},e}(),tS=function(){function e(e,r,t,n){this.block_number=e,this.block_reward=r,this.gas_fees=t,this.miner=n}return e.prototype.serialize=function(e){e.serializeU64(this.block_number),e.serializeU128(this.block_reward),e.serializeU128(this.gas_fees),this.miner.serialize(e)},e.deserialize=function(r){var t=r.deserializeU64(),n=r.deserializeU128(),i=r.deserializeU128(),o=tA.deserialize(r);return new e(t,n,i,o)},e}(),tO=function(){function e(e,r){this.amount=e,this.token_code=r}return e.prototype.serialize=function(e){e.serializeU128(this.amount),this.token_code.serialize(e)},e.deserialize=function(r){var t=r.deserializeU128(),n=tD.deserialize(r);return new e(t,n)},e}(),tV=function(){function e(e,r,t){this.amount=e,this.token_code=r,this.metadata=t}return e.prototype.serialize=function(e){e.serializeU128(this.amount),this.token_code.serialize(e),tF.serializeVectorU8(this.metadata,e)},e.deserialize=function(r){var t=r.deserializeU128(),n=tD.deserialize(r),i=tF.deserializeVectorU8(r);return new e(t,n,i)},e}(),tR=function(){function e(e,r){this.amount=e,this.token_code=r}return e.prototype.serialize=function(e){e.serializeU128(this.amount),this.token_code.serialize(e)},e.deserialize=function(r){var t=r.deserializeU128(),n=tD.deserialize(r);return new e(t,n)},e}(),tC=function(){function e(e,r,t,n){this.number=e,this.author=r,this.timestamp=t,this.uncles=n}return e.prototype.serialize=function(e){e.serializeU64(this.number),this.author.serialize(e),e.serializeU64(this.timestamp),e.serializeU64(this.uncles)},e.deserialize=function(r){var t=r.deserializeU64(),n=tA.deserialize(r),i=r.deserializeU64(),o=r.deserializeU64();return new e(t,n,i,o)},e}(),tj=function(){function e(e,r){this.proposal_id=e,this.proposer=r}return e.prototype.serialize=function(e){e.serializeU64(this.proposal_id),this.proposer.serialize(e)},e.deserialize=function(r){var t=r.deserializeU64(),n=tA.deserialize(r);return new e(t,n)},e}(),tD=function(){function e(e,r,t){this.address=e,this.module=r,this.name=t}return e.prototype.serialize=function(e){this.address.serialize(e),e.serializeStr(this.module),e.serializeStr(this.name)},e.deserialize=function(r){var t=tA.deserialize(r),n=r.deserializeStr(),i=r.deserializeStr();return new e(t,n,i)},e}(),tG=function(){function e(e,r,t,n,i){this.proposal_id=e,this.proposer=r,this.voter=t,this.agree=n,this.vote=i}return e.prototype.serialize=function(e){e.serializeU64(this.proposal_id),this.proposer.serialize(e),this.voter.serialize(e),e.serializeBool(this.agree),e.serializeU128(this.vote)},e.deserialize=function(r){var t=r.deserializeU64(),n=tA.deserialize(r),i=tA.deserialize(r),o=r.deserializeBool(),a=r.deserializeU128();return new e(t,n,i,o,a)},e}(),tL=function(){function e(e,r,t){this.amount=e,this.token_code=r,this.metadata=t}return e.prototype.serialize=function(e){e.serializeU128(this.amount),this.token_code.serialize(e),tF.serializeVectorU8(this.metadata,e)},e.deserialize=function(r){var t=r.deserializeU128(),n=tD.deserialize(r),i=tF.deserializeVectorU8(r);return new e(t,n,i)},e}(),tF=function(){function e(){}return e.serializeArray16U8Array=function(e,r){e.forEach(function(e){r.serializeU8(e[0])})},e.deserializeArray16U8Array=function(e){for(var r=[],t=0;t<16;t++)r.push([e.deserializeU8()]);return r},e.serializeVectorU8=function(e,r){r.serializeLen(e.length),e.forEach(function(e){r.serializeU8(e)})},e.deserializeVectorU8=function(e){for(var r=e.deserializeLen(),t=[],n=0;n<r;n++)t.push(e.deserializeU8());return t},e}();tD.prototype.toJS=function(){return{address:rg(this.address),module:this.module,name:this.name}},tV.prototype.toJS=function(){return{amount:this.amount,metadata:this.metadata,token_code:this.token_code.toJS()}},tB.prototype.toJS=function(){return{token_code:this.token_code.toJS()}},tS.prototype.toJS=function(){return{block_number:this.block_number,block_reward:this.block_reward,gas_fees:this.gas_fees,miner:rg(this.miner)}},tO.prototype.toJS=function(){return{amount:this.amount,token_code:this.token_code.toJS()}},tR.prototype.toJS=function(){return{amount:this.amount,token_code:this.token_code.toJS()}},tC.prototype.toJS=function(){return{number:this.number,author:rg(this.author),timestamp:this.timestamp,uncles:this.uncles}},tj.prototype.toJS=function(){return{proposal_id:this.proposal_id,proposer:rg(this.proposer)}},tG.prototype.toJS=function(){return{agree:this.agree,vote:this.vote,voter:rg(this.voter),proposal_id:this.proposal_id,proposer:rg(this.proposer)}},tL.prototype.toJS=function(){return{amount:this.amount,metadata:this.metadata,token_code:this.token_code.toJS()}},tV.prototype.toJS=function(){return{amount:this.amount,metadata:this.metadata,token_code:this.token_code.toJS()}}}}]);
//# sourceMappingURL=272dda8c.756f3817173add96.js.map