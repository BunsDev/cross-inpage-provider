(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8146],{23044:function(e,n,t){"use strict";t.d(n,{p:function(){return r}}),t(67294);var i=t(99034),s=t.n(i),o=t(85893);function r(e){var n=e.dapps;return(0,o.jsxs)("div",{className:s().container,children:[(0,o.jsx)("h3",{children:"Top DApps"}),(0,o.jsx)("ul",{children:n.map(function(e){return(0,o.jsx)("li",{children:(0,o.jsxs)("a",{href:e.url,target:"_blank",children:[e.name," ↗"]})},e.name)})})]})}},10949:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return k}});var i,s,o=t(15861),r=t(97685),c=t(67294),a=t(66409),u=t(22519),l=t(10366),d=t(57069);class h extends d.BX{constructor(e){super(e),this.providerName=l.U.sui}request(e){return this.bridgeRequest(e)}}var g=t(14859);let f=["viewAccount","suggestTransactions"];var v=function(e,n,t,i){return new(t||(t=Promise))(function(s,o){function r(e){try{a(i.next(e))}catch(e){o(e)}}function c(e){try{a(i.throw(e))}catch(e){o(e)}}function a(e){var n;e.done?s(e.value):((n=e.value)instanceof t?n:new t(function(e){e(n)})).then(r,c)}a((i=i.apply(e,n||[])).next())})};let p={connect:"connect",disconnect:"disconnect",accountChanged:"accountChanged",networkChange:"networkChange",message_low_level:"message_low_level"};function m({method:e,name:n}){return e===`wallet_events_${n}`}class _ extends h{constructor(e){super(Object.assign(Object.assign({},e),{bridge:e.bridge||(0,u.R)({timeout:e.timeout})})),this._account=null,this._registerEvents()}_registerEvents(){window.addEventListener("onekey_bridge_disconnect",()=>{this._handleDisconnected()}),this.on(p.message_low_level,e=>{if(!e)return;let{method:n,params:t}=e;m({method:n,name:p.accountChanged})&&this._handleAccountChange(t),m({method:n,name:p.networkChange})&&this._handleNetworkChange(t)})}_callBridge(e){return this.bridgeRequest(e)}_handleConnected(e,n={emit:!0}){if(this._account=e,n.emit&&this.isConnectionStatusChanged("connected")){this.connectionStatus="connected";let n=null!=e?e:null;this.emit("connect",n.address),this.emit("accountChanged",n.address)}}_handleDisconnected(e={emit:!0}){this._account=null,e.emit&&this.isConnectionStatusChanged("disconnected")&&(this.connectionStatus="disconnected",this.emit("disconnect"),this.emit("accountChanged",null))}isAccountsChanged(e){var n;return(null==e?void 0:e.address)!==(null===(n=this._account)||void 0===n?void 0:n.address)}_handleAccountChange(e){if(this.isAccountsChanged(e)&&this.emit("accountChanged",(null==e?void 0:e.address)||null),!e){this._handleDisconnected();return}this._handleConnected(e,{emit:!1})}isNetworkChanged(e){return void 0===this._network||e!==this._network}_handleNetworkChange(e){this.isNetworkChanged(e)&&this.emit("networkChange",e||null),this._network=e}hasPermissions(e=f){return v(this,void 0,void 0,function*(){return this._callBridge({method:"hasPermissions",params:e})})}requestPermissions(e=f){return v(this,void 0,void 0,function*(){return this._callBridge({method:"requestPermissions",params:e})})}disconnect(){return v(this,void 0,void 0,function*(){yield this._callBridge({method:"disconnect",params:void 0}),this._handleDisconnected()})}getAccounts(){return v(this,void 0,void 0,function*(){let e=yield this._callBridge({method:"getAccounts",params:void 0});if(0===e.length)throw this._handleDisconnected(),g.b$.provider.unauthorized();return this._handleConnected(e[0]),e})}getActiveChain(){return v(this,void 0,void 0,function*(){return this._callBridge({method:"getActiveChain",params:void 0})})}signAndExecuteTransactionBlock(e){return v(this,void 0,void 0,function*(){return this._callBridge({method:"signAndExecuteTransactionBlock",params:Object.assign(Object.assign({},e),{walletSerialize:JSON.stringify(e.account),blockSerialize:e.transactionBlock.serialize()})})})}signTransactionBlock(e){return v(this,void 0,void 0,function*(){return this._callBridge({method:"signTransactionBlock",params:Object.assign(Object.assign({},e),{walletSerialize:JSON.stringify(e.account),blockSerialize:e.transactionBlock.serialize()})})})}signMessage(e){return v(this,void 0,void 0,function*(){return this._callBridge({method:"signMessage",params:Object.assign(Object.assign({},e),{walletSerialize:JSON.stringify(e.account),messageSerialize:(0,a.ci)(e.message)})})})}isConnected(){return null!==this._account}onNetworkChange(e){return super.on(p.networkChange,e)}onAccountChange(e){return super.on(p.accountChanged,e)}on(e,n){return super.on(e,n)}emit(e,...n){return super.emit(e,...n)}}(i=s||(s={})).STANDARD__CONNECT="standard:connect",i.STANDARD__DISCONNECT="standard:disconnect",i.STANDARD__EVENTS="standard:events",i.SUI__SIGN_AND_EXECUTE_TRANSACTION_BLOCK="sui:signAndExecuteTransactionBlock",i.SUI__SIGN_TRANSACTION_BLOCK="sui:signTransactionBlock",i.SUI__SIGN_MESSAGE="sui:signMessage";var C=t(23044),w=[{name:"Cetus",url:"https://app.cetus.zone/"},{name:"SuiSwap",url:"https://suiswap.app/"},{name:"Sui Names",url:"https://sui-names.com/"}],y=t(90905),S=t(93630),j=t(85893),x=function(){var e=(0,c.useState)(),n=(0,r.Z)(e,2),t=n[0],i=n[1];return(0,c.useEffect)(function(){i(window.suiWallet||new _({}))},[]),t},b={kind:"MoveCall",target:"0x0000000000000000000000000000000000000002::devnet_nft::mint",typeArguments:[],arguments:[]};function k(){var e,n,t,i,s,a,u,l=x(),d=(0,c.useState)("TestNet"),h=(0,r.Z)(d,2),g=h[0],f=h[1],v=(0,c.useState)(!1),p=(0,r.Z)(v,2),m=p[0],_=p[1],k=(0,c.useState)(null),N=(0,r.Z)(k,2),O=N[0],A=N[1],T=(0,c.useState)(b),E=(0,r.Z)(T,2),B=E[0],D=E[1],Z=(0,c.useMemo)(function(){return new y.r6k(new y.ewe("testnet"===g.toLowerCase()?{fullnode:"https://fullnode.testnet.sui.io",faucet:"https://faucet.testnet.sui.io/gas"}:{fullnode:"https://fullnode.devnet.sui.io",faucet:"https://faucet.devnet.sui.io/gas"}))},[g]);if((0,c.useEffect)(function(){if(l){try{l.on("connect",function(e){_(!0),A(e),console.log("suiWallet.on [connect] "+e)})}catch(e){}try{l.on("disconnect",function(){A(null),_(!1),console.log("suiWallet.on [disconnect] \uD83D\uDC4B")})}catch(e){}try{l.on("networkChange",function(e){f(e),console.log("suiWallet.on [networkChange] "+e)})}catch(e){}try{l.on("accountChanged",function(e){A(e),_(!!e),console.log("suiWallet.on [accountChange] "+e)})}catch(e){}return function(){l.disconnect()}}},[l]),!l)return(0,j.jsx)("h2",{children:"Could not find a provider"});var P=(e=(0,o.Z)(function*(){try{var e=yield l.hasPermissions();console.log("[hasPermissions]",e)}catch(e){console.warn(e),console.log("[error] hasPermissions: "+JSON.stringify(e))}}),function(){return e.apply(this,arguments)}),I=(n=(0,o.Z)(function*(){try{var e=yield l.requestPermissions();return console.log("[requestPermissions]",e),e}catch(e){console.warn(e),console.log("[error] requestPermissions: "+JSON.stringify(e))}}),function(){return n.apply(this,arguments)}),q=(t=(0,o.Z)(function*(){try{var e=yield l.getAccounts();return console.log("[getAccounts]",e),e}catch(e){console.warn(e),console.log("[error] getAccounts: "+JSON.stringify(e))}}),function(){return t.apply(this,arguments)}),J=(i=(0,o.Z)(function*(){try{var e=yield I();if(e){var n,t,i=yield q();A(null!=(n=null==(t=i[0])?void 0:t.address)?n:null),f(g),_(!0),console.log("[connectWallet] account",i,g)}else console.log("[error] connectWallet",e,g)}catch(e){console.warn(e),console.log("[error] connectWallet: "+JSON.stringify(e))}}),function(){return i.apply(this,arguments)}),z=(s=(0,o.Z)(function*(){try{var e=yield Z.requestSuiFromFaucet(O);console.log("[requestSuiFromFaucet] faucet success:",e)}catch(e){console.warn(e),console.log("[error] requestSuiFromFaucet: "+JSON.stringify(e))}}),function(){return s.apply(this,arguments)}),R=(a=(0,o.Z)(function*(){try{yield l.disconnect()}catch(e){console.warn(e),console.log("[error] disconnect: "+JSON.stringify(e))}}),function(){return a.apply(this,arguments)}),W=(u=(0,o.Z)(function*(){try{yield(0,S.H)(Z,O,"0xe40a5a0133cac4e9059f58f9d2074a3386d631390e40eadb43d2606e8975f3eb","100000")}catch(e){console.warn(e),console.log("[error] signAndExecuteTransaction: "+JSON.stringify(e))}}),function(){return u.apply(this,arguments)});return(0,j.jsxs)("div",{children:[(0,j.jsx)(C.p,{dapps:w}),!l&&(0,j.jsx)("a",{target:"_blank",href:"https://www.onekey.so/download/",children:"Install OneKey Extension →"}),(0,j.jsx)("main",{children:l&&m?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)("div",{children:[(0,j.jsxs)("pre",{children:["Network:"," ",(0,j.jsxs)("select",{value:g,onChange:function(e){return f(e.target.value)},children:[(0,j.jsx)("option",{value:"TestNet",children:"TestNet"}),(0,j.jsx)("option",{value:"DevNet",children:"DevNet"})]})]}),(0,j.jsxs)("pre",{children:["Connected as: ",O]}),(0,j.jsx)("button",{onClick:z,children:"Faucet SUI"})]}),(0,j.jsx)("br",{}),(0,j.jsx)("button",{onClick:P,children:"Has Permissions"}),(0,j.jsx)("button",{onClick:I,children:"Request Permissions"}),(0,j.jsx)("button",{onClick:q,children:"Get Accounts"}),(0,j.jsx)("button",{onClick:(0,o.Z)(function*(){return yield W()}),children:"Sign & Execute Transaction"}),(0,j.jsx)("button",{onClick:function(){return R()},children:"Disconnect"}),(0,j.jsx)("br",{}),(0,j.jsx)("br",{}),(0,j.jsxs)("div",{style:{border:"1px solid #cccccc",flexDirection:"column"},children:[(0,j.jsx)("pre",{}),(0,j.jsx)("textarea",{rows:12,cols:80,value:JSON.stringify(B,null,4),onChange:function(e){try{D(JSON.parse(e.target.value))}catch(e){console.log("[input] Custom Execute MoveCall error")}}})]})]}):(0,j.jsx)(j.Fragment,{children:(0,j.jsx)("button",{onClick:function(){return J()},children:"Connect Wallet"})})})]})}},93630:function(e,n,t){"use strict";t.d(n,{H:function(){return l}});var i,s,o=t(84506),r=t(74902),c=t(15861),a=t(90905),u=(i=(0,c.Z)(function*(e,n,t){var i=null,s=[];do{var o=yield e.getCoins({owner:n,coinType:t,cursor:i,limit:50}),c=o.data,a=o.nextCursor;if(!c||!c.length)break;s.push.apply(s,(0,r.Z)(c)),i=a}while(i);return s}),function(e,n,t){return i.apply(this,arguments)}),l=(s=(0,c.Z)(function*(e,n,t,i,s){var r=null==s||""===s?a.uq1:s,c=yield u(e,n,r),l=null==c?void 0:c.filter(function(e){return!e.lockedUntilEpoch}),d=new a.a6g,h=l.filter(function(e){return e.coinType===r}),g=(0,o.Z)(h),f=g[0],v=g.slice(1);if(r===a.uq1){var p=d.splitCoins(d.gas,[d.pure(i)]);d.transferObjects([p],d.pure(t))}else{var m=d.object(f.coinObjectId);v.length&&d.mergeCoins(m,v.map(function(e){return d.object(e.coinObjectId)}));var _=d.splitCoins(m,[d.pure(i)]);d.transferObjects([_],d.pure(t))}return d}),function(e,n,t,i,o){return s.apply(this,arguments)})},55024:function(){},22519:function(e,n,t){"use strict";t.d(n,{R:function(){return r}});var i=t(57069);let{JS_BRIDGE_MESSAGE_DIRECTION:s,JS_BRIDGE_MESSAGE_EXT_CHANNEL:o}=i.vH;function r(e={}){let n=()=>new a(Object.assign(Object.assign({},e),{receiveHandler:i.gZ})),t=(0,i.Pk)(n);return t}let c=!1;class a extends i.ZN{constructor(e){super(e),this.sendAsString=!1,this.isInjected=!0,function(e={}){let n=e.debugLogger||i.go;c||(c=!0,window.addEventListener("message",t=>{var i,r;if(t.source!==window)return;let c=t.data;if(c.channel===o&&c.direction===s.HOST_TO_INPAGE){n.extInjected("onWindowPostMessage",c);let t=c.payload,s=null!==(i=e.bridge)&&void 0!==i?i:null===(r=null==window?void 0:window.$onekey)||void 0===r?void 0:r.jsBridge;s&&s.receive(t)}},!1))}({debugLogger:this.debugLogger,bridge:this})}sendPayload(e){window.postMessage({channel:o,direction:s.INPAGE_TO_HOST,payload:e})}}}}]);
//# sourceMappingURL=8146.c072c0a85c210e00.js.map