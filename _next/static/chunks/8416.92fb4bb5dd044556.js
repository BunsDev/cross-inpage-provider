(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8416],{23044:function(e,n,t){"use strict";t.d(n,{p:function(){return o}}),t(67294);var s=t(99034),a=t.n(s),r=t(85893);function o(e){var n=e.dapps;return(0,r.jsxs)("div",{className:a().container,children:[(0,r.jsx)("h3",{children:"Top DApps"}),(0,r.jsx)("ul",{children:n.map(function(e){return(0,r.jsx)("li",{children:(0,r.jsxs)("a",{href:e.url,target:"_blank",children:[e.name," ↗"]})},e.name)})})]})}},74736:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return c}});var s=t(15861),a=t(97685),r=t(67294),o=t(58005),d=t(23044),i=[{name:"SunSwap",url:"https://sunswap.com/#/home"},{name:"JustLendDAO",url:"https://app.justlend.org/#/home"},{name:"TRONSCAN",url:"https://tronscan.org/#/"},{name:"JUST CDP Portal",url:"https://juststable.tronscan.org/"}],l=t(85893),c=function(){var e=(0,r.useState)(!1),n=(0,a.Z)(e,2),t=n[0],c=n[1],u=(0,r.useState)(),h=(0,a.Z)(u,2),p=h[0],f=h[1],g=(0,r.useState)(""),v=(0,a.Z)(g,2);v[0],v[1];var x=(0,r.useState)([]),b=(0,a.Z)(x,2),m=b[0],j=b[1],k=(0,r.useRef)(),y=(0,r.useRef)(),w=(0,r.useRef)(),C=(0,r.useRef)(),S=(0,r.useRef)(),Z=(0,r.useCallback)((0,s.Z)(function*(){yield p.request({method:"tron_requestAccounts"})}),[p]),A=(0,r.useCallback)((0,s.Z)(function*(){var e=yield p.request({method:"tron_accounts"}),n=(0,a.Z)(e,1)[0];try{var t=p.tronWeb,s=yield t.transactionBuilder.sendTrx(k.current.value,1e6,n),r=yield t.trx.sign(s),o=yield t.trx.sendRawTransaction(r);console.log("send native token result: "+JSON.stringify(o))}catch(e){console.log(e)}}),[p]),_=(0,r.useCallback)((0,s.Z)(function*(){var e=yield p.request({method:"tron_accounts"}),n=(0,a.Z)(e,1)[0];try{var t=p.tronWeb,s=yield t.transactionBuilder.triggerSmartContract(w.current.value,"transfer(address,uint256)",{},[{type:"address",value:y.current.value},{type:"uint256",value:"1000000000000000000"}],n),r=yield t.trx.sign(s.transaction),o=yield t.trx.sendRawTransaction(r);console.log("send token result: "+JSON.stringify(o))}catch(e){console.log(e)}}),[p]),R=(0,r.useCallback)((0,s.Z)(function*(){try{yield p.request({method:"wallet_watchAsset",params:{type:"trc20",options:{address:"TF17BgPaZYbz8oxbjhriubPDsA7ArKoLX3",symbol:"JUST GOV",decimals:18,image:"https://static.tronscan.org/production/logo/just_icon.png"}}}),console.log("add token success")}catch(e){console.log(e)}}),[p]),T=(0,r.useCallback)((0,s.Z)(function*(){var e=yield p.request({method:"tron_accounts"}),n=(0,a.Z)(e,1)[0];try{var t=p.tronWeb,s=yield t.transactionBuilder.triggerSmartContract(w.current.value,"approve(address,uint256)",{},[{type:"address",value:y.current.value},{type:"uint256",value:"1000000000000000000"}],n),r=yield t.trx.sign(s.transaction),o=yield t.trx.sendRawTransaction(r);console.log("approve token result: "+JSON.stringify(o))}catch(e){console.log(e)}}),[p]),N=(0,r.useCallback)(function(){f(window.tronLink||new o.AX({}))},[]);return(0,r.useEffect)(function(){var e,n;p&&null!=p&&null!=(e=p.tronWeb)&&null!=(n=e.defaultAddress)&&n.base58&&(j([p.tronWeb.defaultAddress.base58]),c(!0))},[p]),(0,r.useEffect)(function(){window.tronLink?N():window.addEventListener("tronLink#initialized",N,{once:!0}),window.addEventListener("message",function(e){if(e.data.message&&"accountsChanged"===e.data.message.action&&(j([e.data.message.data.address].filter(function(e){return e})),console.log("tron accountsChanged",e.data.message.data)),e.data.message&&"setAccount"===e.data.message.action&&j([e.data.message.data.address].filter(function(e){return e})),e.data.message&&"connect"===e.data.message.action){var n,t;c(!0),j([null==(n=window.tronWeb)?void 0:null==(t=n.defaultAddress)?void 0:t.base58])}e.data.message&&"disconnect"===e.data.message.action&&c(!1)})},[N]),(0,l.jsxs)("div",{children:[(0,l.jsx)(d.p,{dapps:i}),!p&&(0,l.jsx)("a",{target:"_blank",href:"https://www.onekey.so/download/",children:"Install OneKey Extension →"}),p&&(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{children:(0,l.jsx)("p",{children:"Wallet is initialized"})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("button",{disabled:t,onClick:Z,children:t?"connected":"connect wallet"}),t&&(0,l.jsx)("p",{children:m})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("input",{ref:k,placeholder:"to address"}),(0,l.jsx)("button",{disabled:!t,onClick:A,children:"send 1 trx token"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("input",{ref:w,placeholder:"token address"}),(0,l.jsx)("input",{ref:y,placeholder:"to address"}),(0,l.jsx)("button",{disabled:!t,onClick:_,children:"send token"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("input",{ref:S,placeholder:"token address"}),(0,l.jsx)("input",{ref:C,placeholder:"spender address"}),(0,l.jsx)("button",{disabled:!t,onClick:T,children:"approve token"})]}),(0,l.jsx)("div",{children:(0,l.jsx)("button",{disabled:!t,onClick:R,children:"add trc20 token"})})]})]})}},88677:function(){},69159:function(){}}]);
//# sourceMappingURL=8416.92fb4bb5dd044556.js.map